=>DLT Project

     =move file
          bcj3 > admintemplatetwo > assets
          exercisetwo > public

          bcj3 > admintemplatetwo > css, js
          exercisetwo > public > assets > disc (disc folder created)

     =Dashboard page
          default dashboard page to customized dashboards page 

          php artisan make:controller DashboardsController -r
     
     =In DashboardsController.php

     =In Web
          Route::get("/dashboards",[DashboardsController::class,'index'])->name("dashboard.index");
          *use App\Http\Controllers\DashboardsController;

     =In View
          dashboards >
          =create index.blade.php

          =create adminindex.blade.php
          =create adminheader.blade.php (<!DOCTYPE HTML - <body>)
          =create adminfooter.blade.php (</body> - </html>)
          =create adminleftsitebar.blae.php (Start -End Left Navbar)


          =In adminindex.blde.php
               @include("layouts.adminheader")

               <div>
                    <!-- Start Site Setting -->
                    <div id="sitesettings" class="sitesettings">
                         <div class="sitesettings-item"><a href="javascript:void(0);" id="sitetoggle" class="sitetoggle"><i class="fas fa-cog ani-rotates"></i></a></div>
                    </div>
                    <!-- End Site Settin -->

                    <!-- Start Left Side Bar -->
                    @include("layouts.adminleftsidebar")
                    <!-- End Left Side Bar -->

                    <!-- Start Content Area -->
                    @yield("content")
                    <!-- End Content Area -->
               </div>
         
               @include("layouts.adminfooter")

     
          =In index.blade.php
               @extends("layouts.adminindex")

               @section("content")
                    <!-- Start Content Area -->
                    <section>
                         ....
                    </section>
                    <!-- End Content Area -->
               @endsection

          =In adminheader.blade.php
               <!-- Application Name -->
               <title>{{ config('app.name') }}</title>
               <!-- fav icon -->
               <link href="{{ asset('assets/img/fav/favicon.png') }}" rel="icon" type="image/png" sizes="16x16"/>
               <!-- jqueryui css1 js1 -->
               <link href="{{asset('./assets/libs/jquery-ui-1.13.2.custom/jquery-ui.min.css')}}" rel="stylesheet" type="text/css">
               <!-- custom css css1 -->
               <link href="{{ asset('assets/disc/css/style.css') }}" rel="stylesheet" type="text/css"/>
          
               <!-- Extra CSS -->
               @yield('css')

               =.env
                    APP_NAME="DLT Project"
          =In adminfooter.blade.php
               <!-- jqueryui css1 js1 -->
               <script src="{{asset('./assets/libs/jquery-ui-1.13.2.custom/jquery-ui.min.js')}}"></script>
               <!-- custom js js1 -->
               <script src="{{ asset('assets/disc/js/app.js') }}" type="text/javascript"></script>

          
     =>Display Authenticated user name
          =In app > Provider > AppServiceProvider.php
               public function boot(): void
               {
                    View::composer('*',function($view){
                         $view->with("userdata",Auth::user());
                    });
               }
               *use Illuminate\Support\Facades\View;
               *use Illuminate\Support\Facades\Auth;

          =In adminleftsidebar.blade.php
               <span class="text-muted small me-2">{{ $userdata["name"] }}</span>

     =>After login/register Redirect
          app > Providers > RouteServiceProvider.php

               // public const HOME = '/dashboard';
               public const HOME = '/dashboards';
          
          *user is redirectd to dashboards after sucessful authentication.

     =create filder students >
     =index.blade.php
     =create.blade.php

     =>Sticky Form
          -When validation error occur, all form field is empty. To protect the user from repeatedly filling the field.
          -get the previous filled value if error occur
               old('inputname')
          
          =In create.blade.php
               <input type="text" name="firstname" id="firstname" class="form-control form-control-sm rounded-0" placeholder="Enter First name" value="{{ old('firstname') }}"/>
               <textarea name="remark" id="remark" class="form-control rounded-0" rows="5" placeholder="Enter Remark">{{ old('remark')}}</textarea>

     =>Limiting text length
          =In index.blade.php
               <td>{{Str::limit($student->remark,10)}}</td>

     =>Formattng date time (laravel)
          =In index.blade.php
               <td>{{ $student->created_at->format('d M Y') }}</td>
               <td>{{ $student->updated_at->format('d M Y') }}</td>

     =>Delete Best Practice 
          =In index.blade.php
                    <td>
                         <a href="{{ route('students.edit',$student->id) }}" class="text-info"><i class="fas fa-pen"></i></a>
                         <!-- <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$student->id}}"><i class="fas fa-trash-alt"></i></a> -->
                         <!-- <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a> -->
                         <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$student->regnumber}}"><i class="fas fa-trash-alt"></i></a>
                    
                    </td>
                    ....
                    <!-- <form id="formdelete-{{ $student->id }}" class="" action="{{route('students.destroy',$student->id)}}" method="POST"> -->
                    <!-- <form id="formdelete-{{ $idx }}" class="" action="{{route('students.destroy',$student->id)}}" method="POST"> -->
                    <form id="formdelete-{{ $student->regnumber }}" class="" action="{{route('students.destroy',$student->id)}}" method="POST">
                         @csrf
                         @method("DELETE")
                    </form>

               @section("scripts")
                    <script type="text/javascript">
                         $(document).ready(function(){
                              $(".delete-btns").click(function(){
                                   // console.log('hay');
                         
                                   var getidx = $(this).data("idx");
                                   // console.log(getidx);

                                   if(confirm(`Are you sure !!! you want to Delete ${getidx} ?`)){
                                        $('#formdelete-'+getidx).submit();
                                        return true;
                                   }else{
                                        false;
                                   }
                              });
                         });
                    </script>
               @endsection

          -Comfirm user to delete this student id (it is not very user-friendly. It can be complex).
          -Comfirm user to delete this current number or registration number (it is secretly delete the student id in background).

     =>user_id, status_id join
          =In Model (Student.php)
               public function user(){
                    return $this->belongsTo("App\Models\User");
               }

               public function status(){
                    // return $this->belongsTo(Status::class); // send all column
                    // return $this->belongsTo(Status::class)->select("name"); // send single column
                    return $this->belongsTo(Status::class)->select(["id","name","slug"]); // send multi column
               }

          =In index.blade.php
               <td>{{ $student->status->name }}</td>
               <td>{{ $student->user["name"] }}</td>
          =In show.blade.php
               <i class="fas fa-user fa-sm"></i> <span>{{$student["user"]["name"]}}</span>

          
          *show user name and status name by joining the tables

     =>Formattng date time (php)
          =In show.blade.php
               <i class="fas fa-calendar-alt fa-sm"></i> <span>{{date('d M Y',strtotime($student->created_at))}} {{date('h:i:s A',strtotime($student->created_at))}}</span>
               <br/>
               <i class="fas fa-edit fa-sm"></i> <span>{{date('d M Y h:i:s A',strtotime($student->updated_at))}}</span>

     =>Setting server timezone
          config > app.php
               'timezone' => 'Asia/Yangon',

     =>Update & Validate
          =In StudentsController.php
               public function update(Request $request, string $id)
               {
                    $this->validate($request,[
                         // "regnumber" => "required|unique:students,regnumber",
                         "regnumber" => "required|unique:students,regnumber,".$id,
                         "firstname"=>"required",
                         "lastname"=>"required",
                         "remark" => "max:1000"
                    ]);

                    $user = Auth::user();
                    $user_id = $user["id"];

                    $student = Student::findOrFail($id);
                    $student->regnumber = $request["regnumber"];
                    $student->firstname = $request["firstname"];
                    $student->lastname = $request["lastname"];
                    $student->slug = Str::slug($request["firstname"]);
                    $student->remark = $request["remark"];
                    $student->user_id = $user_id;

                    $student->save();
                    return redirect(route("students.index"));
               }

          *slug name will be updated, when the firstname is modified
          - validation error and the updated information is not stored 
               if check "regnumber" Unique and we only change firstname, not the regnumber field
          -Unique check the field is not exist in the database table

          - Forcing A Unique Rule To Ignore A Given ID
               unique rule pass for the student id.
               *update() must carefully specify id to ignore unique rule

     => Small resource CRUD (Single Page)
          =>Create/Store + index
               =index.blade.php
                    <div class="col-md-12">
                         <!-- http://127.0.0.1:8000/statuses -->
                         <form action="{{route('statuses.store')}}" method="POST">
                              {{ csrf_field() }}
                              <div class="row align-items-end">
                                   <div class="col-md-6">
                                        <label for="name">Name <span class="text-danger">*</span></label>
                                        <input type="text" name="name" id="name" class="form-control form-control-sm rounded-0" placeholder="Enter Status Name" value="{{ old('name') }}"/>
                                   </div>

                                   <div class="col-md-6 ">
                                        <button type="reset" class="btn btn-secondary btn-sm rounded-0">Cancel</button>
                                        <button type="submit" class="btn btn-primary btn-sm rounded-0 ms-3">Submit</button>
                                   </div>
                              </div>
                         </form>
                    </div>
                    ....

                    <tbody>
                         @foreach($statuses as $idx=>$status)
                         <tr>
                              <td>{{++$idx}}</td>
                              <td>{{ $status->name }}</td>
                              <td>{{ $status->user["name"] }}</td>
                              <td>{{ $status->created_at->format('d M Y') }}</td>
                              <td>{{ $status->updated_at->format('d M Y') }}</td>
                              
                         </tr>
                         @endforeach
                    </tbody>

               =In StatusesController.php
                    public function index()
                    {
                         $statuses = Status::all();
                         return view("statuses.index",compact("statuses"));
                    }

                    public function store(Request $request)
                    {
                         $this->validate($request,[
                              "name" => "required|unique:statuses,name",
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $status = new Status();
                         $status->name = $request["name"];
                         $status->slug = Str::slug($request["name"]);
                         $status->user_id = $user_id;

                         $status->save();
                         return redirect(route("statuses.index"));
                    }
                    *This time use Request.
                    -We will study StatusCreateRequest later.

                    -No longer require create().
          
          =>Read 
               -Don't need to use show() because resource is too small.
          =>Delete
               =In index.blade.php
                    <td>
                         <a href="{{ route('statuses.edit',$status->id) }}" class="text-info"><i class="fas fa-pen"></i></a>
                         <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                    
                    </td>
                    <form id="formdelete-{{ $idx }}" class="" action="{{route('statuses.destroy',$status->id)}}" method="POST">
                         @csrf
                         @method("DELETE")
                    </form>
               =In StatusesController.php
                    public function destroy(string $id)
                    {
                         $student = Status::findOrFail($id);
                         $student->delete();
                         return redirect()->back();
                    }
          
          =>Edit/Update + index (Single Page)
               =In index.blade.php
                    <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$status->id}}" data-name="{{$status->name}}"><i class="fas fa-pen"></i></a>
                    ....

                    <!-- START MODAL AREA -->
                         <!-- start edit modal -->
                              <div id="editmodal" class="modal fade">
                                   <div class="modal-dialog modal-sm modal-dialog-centered">
                                        <div class="modal-content">
                                             <div class="modal-header">
                                                  <h6 class="modal-title">Edit Form</h6>
                                                  <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                             </div>

                                             <div class="modal-body">
                                                  <form id="formaction" action="" method="POST">
                                                       {{ csrf_field() }}
                                                       {{ method_field('PUT') }}
                                                       <div class="row align-items-end">
                                                            <div class="col-md-8">
                                                                 <label for="editname">Name <span class="text-danger">*</span></label>
                                                                 <input type="text" name="name" id="editname" class="form-control form-control-sm rounded-0" placeholder="Enter Status Name" value="{{ old('name') }}"/>
                                                            </div>
                                   
                                                            <div class="col-md-2">
                                                                 <button type="submit" class="btn btn-primary btn-sm rounded-0">Update</button>
                                                            </div>
                                                       </div>
                                                  </form>
                                             </div>

                                             <div class="modal-footer">

                                             </div>
                                        </div>
                                   </div>
                              </div>
                         <!-- end edit modal -->
                    <!-- END MODAL AREA -->      

                    ....

                    // Start Edit Form
                    $(document).on("click",".editform",function(e){
                         // console.log($(this).attr("data-id"),$(this).attr("data-name"));
                         
                         $("#editname").val($(this).attr("data-name"));
                         const getid = $(this).attr("data-id");
                         $("#formaction").attr("action",`/statuses/${getid}`);

                         e.preventDefault();
                    });
                    // End Edit Form
               
               =In StatusesController.php

                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "name" => "required|unique:statuses,name,".$id,
                         ]);

                         $user = Auth::user();
                         $user_id = $user['id'];

                         $status = Status::findOrFail($id);
                         $status->name = $request["name"];
                         $status->slug = Str::slug($request["name"]);
                         $status->user_id = $user_id;

                         $status->save();
                         return redirect(route("statuses.index"));
                    }
                    -No longer require edit().

               *Show the current item information in edit modal 
                    -modal box with bootstrap
                    -link modal box with edit btn
                    -"id", "name" pass from edit btn
                    -clicking edit btn, set "name" to the edit form input field 

               *if modal form is set to action="{{route('statuses.update',$status->id)}}",
                    the url is http://127.0.0.1:8000/statuses/14
                    -change in any item will only change the last item because it is outside the loop
                    -if there is no row in database, it will get error (undefined variable) since it didn't even enter the loop 
               
               *atomatically change update url of current item
                    -clicking edit btn, dynamically set edit form action url with the current item "id" 


     =>Image + Select box
          php artisan make:controller RolesController -r
          php artisan make:model Role -m 

          =In Web
               *under Auth
               Route::resource("roles",RolesController::class);

          =Migration
               =create_roles_table.php
                    $table->string("image")->nullable();
                    $table->string("name");
                    $table->string("slug");
                    $table->unsignedBigInteger("status_id")->default("3");
                    $table->unsignedBigInteger("user_id");

               php artisan migrate:status
               php artisan migrate

          =In Model (Role.php)
               protected $table = "roles";
               protected $primaryKey = "id";
               protected $fillable = [
                    "image",
                    "name",
                    "slug",
                    "status_id",
                    "user_id"
               ];

               public function user(){
                    return $this->belongsTo(User::class);
               }

               public function status(){
                    return $this->belongsTo(Status::class);
               }

          =>Single Image Preview
               =In create.blade.php
                    jQuery image preview html css js        
                    filereader.onload = function(e){
                         $(output).html(""); 
                         $($.parseHTML('<img>')).attr('src',e.target.result).appendTo(output);
                    }
                    *Firstly repeatedly choosing image show unnecessary previous selected image.
                         -Solution for this is, output element's html is set empty, preparing ready to show new image.

          =>Status Option
               =In RolesController.php
                    public function create()
                    {    
                         //$statuses = Status::all(); // get all statuses
                         $statuses = Status::whereIn("id",[3,4])->get();
                         return view("roles.create",compact("statuses"));
                    }

               =In create.blade.php
                    <select type="text" name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                         <!-- <option value="3">On</option>
                         <option value="4">On</option> -->

                         @foreach($statuses as $status)
                              <option value="{{$status->id}}">{{ $status->name }}</option>
                         @endforeach
                    </select>

                    *dynamically get statuses from database
          
          =>Image Store With Selected Role
               =In RolesController.php
                    public function store(Request $request)
                    {
                         $this->validate($request,[
                              "name" => "required|max:50|unique:roles,name",
                              "image" => "image|mimes:jpg,jpeg,png|max:1024",
                              "status_id" => "required|in:3,4",
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $role = new Role();
                         $role->name = $request["name"];
                         $role->slug = Str::slug($request["name"]);
                         $role->status_id = $request["status_id"];
                         $role->user_id = $user_id;

                         // Single Image Upload
                         if(file_exists($request["image"])){
                              $file = $request["image"];
                              $fname = $file->getClientOriginalName();
                              $imagenewname = uniqid($user_id).$role['id'].$fname;
                              $file->move(public_path("assets/img/roles"),$imagenewname);
            
                              $filepath = "assets/img/roles/".$imagenewname;
                              $role->image = $filepath;
                         }    

                         $role->save();
                         return redirect(route("roles.index"));
                    }
                    *update() needed to be careful than store() if UNIQUE rule is declared,
                         other rules should be defined in front of UNIQUE for the clarity.
                    -Whatever view status_id change, validation rule is not match unless 3 or 4.
          
                    
                    public > foldername = routename
                         $file->move(public_path("roles/img"),$imagenewname);
                         $filepath = "roles/img".$imagenewname;

                    *error
                         Not Found
                         The requested resource /roles was not found on this server.
                    -However, roles/index can't be opened, create and other page can be opened.
                    -Although error occur, the role record and image file (public>roles) are inserted successfully.
          
          =>Image View
               =index.blade.php    
                    <td><img src="{{ asset($role->image) }}" class="rounded-circle" alt="{{$role->name}}" width="20" height="20"/> <a href="{{route('roles.show',$role->id)}}">{{$role->name}}</a></td>
                    
               *asset() use for the file in project folder
               *real world project use aws(amazone web service) and image store as http link
                    so directly give src="$role->image"

          =>Image Edit With Selected Role
               =In RolesController.php
                    public function edit(string $id)
                    {
                         $role = Role::findOrFail($id);
                         $statuses = Status::whereIn("id",[3,4])->get();
                         return view("roles.edit")->with("role",$role)->with("statuses",$statuses);
                    }

               option value = 2 
               equal to
               column value = 2

               <option value="1">myanmar</option>
               "country" column = 2
               *'selected' attribute is to an select option 

               =In index.blade.php
                    <select type="text" name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                         @foreach($statuses as $status)
                              <option value="{{$status->id}}" 
                                   @if($status['id'] === $role->status_id)
                                        selected
                                   @endif
                              >{{ $status->name }}</option>
                         @endforeach
                    </select>
                    -show the statuses and highlight the selected status

                    <form action="/roles/{{$role->id}}" method="POST" enctype="multipart/form-data">
                         @csrf
                         @method("PUT")

                         <div class="row">

                              <div class="col-md-4">
                                   <div class="row">
                                        <div class="col-md-6 text-sm-center">
                                             <img src="{{ asset($role->image) }}" class="" alt="{{$role->name}}" width="200"/>
                                        </div>
                                        <div class="col-md-6">
                                             <label for="image" class="gallery"><span>Choose Images</span></label>
                                        </div>
                                   </div>  
                              </div>
                    -one part show the previous image and another part show the newly changed image

          =>Image Update
               =In RolesController.php  
                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "name" => ["required","max:50","unique:roles,name,".$id],
                              "image" => ["image","mimes:jpg,jpeg,png","max:1024"],
                              "status_id" => ["required","in:3,4"],
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $role = Role::findOrFail($id);
                         $role->name = $request["name"];
                         $role->slug = Str::slug($request["name"]);
                         $role->status_id = $request["status_id"];
                         $role->user_id = $user_id;

                         // Remove Old Image
                         if($request->hasFile("image")){
                              $path = $role->image;

                              if(File::exists($path)){
                                   File::delete($path);
                              }
                         }

                         // Single Image Upload
                         if($request->hasFile("image")){
                              $file = $request->file("image");
                              $fname = $file->getClientOriginalName();
                              $imagenewname = uniqid($user_id).$role['id'].$fname;
                              $file->move(public_path("assets/img/roles"),$imagenewname);
                              
                              $filepath = "assets/img/roles/".$imagenewname;
                              $role->image = $filepath;
                         }    

                         $role->save();
                         return redirect(route("roles.index"));
                    }
                    *Validation can be written as array.
          
          =>Image Delete
               =In RolesController.php
                    public function destroy(string $id)
                    {
                         $role = Role::findOrFail($id);
                         
                         // Remove Old Image
                         $path = $role->image;
                         if(File::exists($path)){
                              File::delete($path);
                         }
                         
                         $role->delete();
                         return redirect()->back();
                    }
          -laravel has reload and reloading problem.
          -Adding javascript is the solution for the problem. (Single File Create/Edit)

          Laravel 
          -Large Solid File is given.
          -Long Time To download the file

          React js
          -Break the heavy workloads into Components
          -Combine seperate components into a single file
          -better performance

     =>Fix Analysis
          Statuses
               'Active'
               'Inactive'
               'On'
               'Off'
               'Online'
               'Offline'
               'Public'
               'Private'
               'Friend Only'
               'Member Only'
               'Only Me'
               'Enable'
               'Disable'
               'Ban'
               'Unban'
               'Block'
               'Unblock'
               'Terminate'

     =>Small resource + Select box
          php artisan make:controller TypesController 

          =In Migration
               php artisan make:model Type -m
               =create_types_table.php
                    up()
                         $table->string("name")->unique();
                         $table->string("slug");
                         $table->unsignedBigInteger("status_id");
                         $table->unsignedBigInteger("user_id");
                         $table->timestamps();

               php artisan migrate:status
               php artisan migrate

          =In Web
               Route::resource("types",TypesController::class);

          =>Check Route
               php artisan route:list
               php artisan route:clear
               php artisan route:cache

               *if the code is all fine and route is not ready
                    it must be the problem of cache, so clear the cache. 
          
          =>Create/Store + index With Selected Option
               =In TypesController.php
                    public function index()
                    {
                         $types = Type::all();
                         $statuses = Status::whereIn("id",[3,4])->get();
                         return view("types.index",compact("types","statuses"));
                    }
                    public function store(Request $request)
                    {
                         $this->validate($request,[
                              "name" => "required|max:50|unique:types",
                              "status_id" => "required|in:3,4",
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $type = new Type();
                         $type->name = $request["name"];
                         $type->slug = Str::slug($request["name"]);
                         $type->status_id = $request["status_id"];
                         $type->user_id = $user_id;
                         $type->save();
                         return redirect(route("types.index"));
                    }
               =In index.blade.php
                    <div class="col-md-12">
                         <form action="{{route('types.store')}}" method="POST">
                              {{ csrf_field() }}

                              <div class="row align-items-end">
                                   <div class="col-md-4">
                                        <label for="name">Name <span class="text-danger">*</span></label>
                                        <input type="text" name="name" id="name" class="form-control form-control-sm rounded-0" placeholder="Enter Type Name" value="{{ old('name') }}"/>
                                   </div>

                                   <div class="col-md-4">
                                        <label for="status_id">Status</label>
                                        <select name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                                             @foreach($statuses as $status)
                                                  <option value="{{$status['id']}}">{{$status['name']}}</option>
                                             @endforeach     
                                        </select>
                                   </div>

                                   <div class="col-md-4">
                                        <button type="reset" class="btn btn-secondary btn-sm rounded-0">Cancel</button>
                                        <button type="submit" class="btn btn-primary btn-sm rounded-0 ms-3">Submit</button>
                                   </div>
                              </div>
                         </form>
                    </div>
                    ....
                    <tbody>
                         @foreach($types as $idx=>$type)
                         <tr>
                              <td>{{++$idx}}</td>
                              <td>{{$type["name"]}}</td>
                              <td>{{ $type->status->name }}</td>
                              <td>{{ $type["user"]["name"] }}</td>
                              <td>{{ $type->created_at->format('d M Y') }}</td>
                              <td>{{ $type->updated_at->format('d M Y') }}</td>
                              <td>
                                   <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$status->id}}" data-name="{{$status->name}}"><i class="fas fa-pen"></i></a>
                                   <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                              </td>
                              <form id="formdelete-{{ $idx }}" class="" action="{{route('types.destroy',$type->id)}}" method="POST">
                                   @csrf
                                   @method("DELETE")
                              </form>
                         </tr>
                         @endforeach
                    </tbody>

          =>Delete
               public function destroy(string $id)
               {
                    $type = Type::findOrFail($id);
                    $type->delete();
                    return redirect()->back();
               }

          =>Edit/Update + index With Selected Option
               =In index.blade.php 
                    <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$type->id}}" data-name="{{$type->name}}" data-status="{{$type->status_id}}"><i class="fas fa-pen"></i></a>
                    ....

                    <!-- START MODAL AREA -->
                         <!-- start edit modal -->
                         <div id="editmodal" class="modal fade">
                              <div class="modal-dialog modal-dialog-centered">
                                   <div class="modal-content rounded-0">
                                        <div class="modal-header">
                                             <h6 class="modal-title">Edit Form</h6>
                                             <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                        </div>

                                        <div class="modal-body">
                                             <form id="formaction" action="" method="POST">
                                                  {{ csrf_field() }}
                                                  {{ method_field('PUT') }}
                                                  <div class="row align-items-end">
                                                       <div class="col-md-7">
                                                            <label for="editname">Name <span class="text-danger">*</span></label>
                                                            <input type="text" name="name" id="editname" class="form-control form-control-sm rounded-0" placeholder="Enter Status Name" value="{{ old('name') }}"/>
                                                       </div>
                                                       
                                                       <div class="col-md-3 form-group">
                                                            <label for="editstatus_id">Status</label>
                                                            <select name="status_id" id="editstatus_id" class="form-control form-control-sm rounded-0">
                                                                 @foreach($statuses as $status)
                                                                      <option value="{{$status['id']}}">{{$status['name']}}</option>
                                                                 @endforeach     
                                                            </select>
                                                       </div>
                                                       
                              
                                                       <div class="col-md-2">
                                                            <button type="submit" class="btn btn-primary btn-sm rounded-0">Update</button>
                                                       </div>
                                                  </div>
                                             </form>
                                        </div>

                                        <div class="modal-footer">

                                        </div>
                                   </div>
                              </div>
                         </div>
                         <!-- end edit modal -->
                    <!-- END MODAL AREA -->
                    ....
                    // Start Edit Form
                    $(document).on("click",".editform",function(e){
                         
                         $("#editname").val($(this).attr("data-name"));
                         $("#editstatus_id").val($(this).data("status"));
                         
                         const getid = $(this).attr("data-id");
                         $("#formaction").attr("action",`/types/${getid}`);

                         e.preventDefault();
                    });
                    // End Edit Form
               *setting select box value automatically select that value 

               =In TypesController.php
                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "name" => ["required","max:50","unique:types,name,".$id],
                              "status_id" => ["required","in:3,4"],
                         ]);

                         $user = Auth::user();
                         $user_id = $user["id"];

                         $type = Type::findOrFail($id);
                         $type->name = $request["name"];
                         $type->slug = Str::slug($request["name"]);
                         $type->status_id = $request["status_id"];
                         $type->user_id = $user_id;
                         $type->save();
                         return redirect(route("types.index"));
                    }

               *It immediately change the newly updated status.Because of php reload feature.
               *Later version will integrate switch to on/of and it doesn't update the value instantly.
               
          -----------------------------------------------------------------
          -hw
               create resources like statuses
                    city
                    country
                    gender

               php artisan make:model City -m
               php artisan make:model Country -m
               php artisan make:model Gender -m

               php artisan make:controller CitiesController -r
               php artisan make:controller CountriesController -r
               php artisan make:controller GendersController -r

               =Migration
                    up()
                         $table->string("name");
                         $table->string("slug");
                         $table->unsignedBigInteger('user_id');
               =In Model

                    protected $table = "statuses";
                    protected $primaryKey = "id";
                    protected $fillable = [
                         "name",
                         "slug",
                         "user_id"
                    ];

                    public function user(){
                         return $this->belongsTo(User::class);
                    }
          
          -hw
               category 
               tag

               (name, slug, status_id, user_id)
          ----------------------------------------------------------

     =>On/Off Switch Button 
          =Create Category & Tag as types
          
          =>Migration

               php artisan make:model Category -m
               php artisan make:model Tag -m

               =create_categories_table.php
               =create_tags_table.php
                    $table->string("name")->unique();
                    $table->string("slug");  
                    $table->unsignedBigInteger("status_id");
                    $table->unsignedBigInteger("user_id");

               php artisan make:controller TagsController -r
               php artisan make:controller CategoriesController -r

          =In categories > index.blade.php
               <td>
                    <div class="form-check form-switch">
                         <input type="checkbox" class="form-check-input" {{ $category->status_id === 3 ? "checked" : "" }} />
                    </div>
               </td>

          Tags
               WDF
               CSS Animation
               jQuery
               Bootstrap Projects
               Mysql
               Tailwind CSS
               JSON & Firebase
               ES6
               PHP
               Laravel
               React
               Node 
               Linux (Ubuntu)
               AWS

     =>Class
          
          =Migration
               php artisan make:model Post -m
               
               =crate_posts_table.php
                    $table->string("image")->nullable();
                    $table->string("title");
                    $table->string("slug");
                    $table->longText("content");
                    $table->decimal("fee",8,2)->default(0);
                    $table->date("startdate")->nullable();
                    $table->date("enddate")->nullable();
                    $table->time("starttime")->nullable();
                    $table->time("endtime")->nullable();
                    $table->unsignedBigInteger("type_id");
                    $table->unsignedBigInteger("tag_id");
                    $table->unsignedBigInteger("attshow")->default("4");
                    $table->unsignedBigInteger("status_id")->default("1");
                    $table->unsignedBigInteger("user_id");

               php artisan migrate:status
               php artisan migrate

               =In Model (Post)
                    protected $table = "posts";
                    protected $primaryKey = "id";
                    protected $fillable = [
                         "image",
                         "title",
                         "slug",
                         "content",
                         "fee",
                         "startdate",
                         "enddate",
                         "starttime",
                         "starttime",
                         "type_id",
                         "tag_id",
                         "attshow",
                         "status_id",
                         "user_id"
                    ];

                    public function user(){
                         return $this->belongsTo(User::class);
                    }

                    public function status(){
                         return $this->belongsTo(Status::class);
                    }

                    public function tag(){
                         return $this->belongsTo(Tag::class);
                    }

                    public function type(){
                         return $this->belongsTo(Type::class);
                    }

          php artisan make:controller PostsController

     
          =>Create Post (Class)
               =In PostsController.php
                    public function create()
                    {    
                         $attshows = Status::whereIn("id",[3,4])->get();
                         $statuses = Status::whereIn("id",[7,10,11])->get();
                         $tags = Tag::where("status_id",3)->get();
                         $types = Type::whereIn("id",[1,2])->get();

                         return view("posts.create",compact("attshows","statuses","tags","types"));
                    }
                    *attshows for whether to show or not to show this class in attendance form - on/off (it is the borrowed property from the statuses)
                    *statuses for visibility of this class (private/public/member only)
                    *tags for the course of this class to filter the classes with the course name
                    *types for the kind of this class (free or paid)

               =In create.blade.php
                    ....
                    <div class="col-md-6">
                         <label for="type_id">Type <span class="text-danger">*</span></label>
                         <select name="type_id" id="type_id" class="form-control form-control-sm rounded-0">
                              @foreach($types as $type)
                                   <option value="{{$type->id}}">{{ $type->name }}</option>
                              @endforeach
                         </select>
                    </div>

                    <div class="col-md-6 mb-3">
                         <label for="fee">Fee <span class="text-danger">*</span></label>
                         <input type="number" name="fee" id="fee" class="form-control form-control-sm rounded-0" placeholder="Class Fee" value="{{ old('fee') }}"/>
                    </div>

                    <div class="col-md-12 mb-3">
                         <label for="content">Content <span class="text-danger">*</span></label>
                         <textarea name="content" id="content" class="form-control form-control-sm rounded-0" rows="5" placeholder="Say Something....">{{ old('content') }}</textarea>
                    </div>

                    <div class="col-md-3">
                         <label for="tag_id">Type <span class="text-danger">*</span></label>
                         <select name="tag_id" id="tag_id" class="form-control form-control-sm rounded-0">
                              @foreach($tags as $tag)
                                   <option value="{{$tag->id}}">{{ $tag->name }}</option>
                              @endforeach
                         </select>
                    </div>

                    <div class="col-md-3">
                         <label for="attshow">Show on Att Form <span class="text-danger">*</span></label>
                         <select name="attshow" id="attshow" class="form-control form-control-sm rounded-0">
                              @foreach($attshows as $attshow)
                                   <option value="{{$attshow->id}}">{{ $attshow->name }}</option>
                              @endforeach
                         </select>
                    </div>

                    <div class="col-md-3">
                         <label for="name">Status <span class="text-danger">*</span></label>
                         <select type="text" name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                              @foreach($statuses as $status)
                                   <option value="{{$status->id}}">{{ $status->name }}</option>
                              @endforeach
                         </select>
                    </div>
                    ....

               =>Hide File Input  
                    =In create.blade.php     
                    <div class="row">
                         <div class="col-md-12 mb-3">
                              <label for="image" class="gallery"><span>Choose Images</span></label>
                              <input type="file" name="image" id="image" class="form-control form-control-sm rounded-0" value="{{ old('image')}}" hidden/>
                         </div>

                         <div class="col-md-6 mb-3">
                              <label for="startdate">Start Date <span class="text-danger">*</span></label>
                              <input type="date" name="startdate" id="startdate" class="form-control form-control-sm rounded-0" value="{{ old('startdate') }}"/>
                         </div>

                         <div class="col-md-6 mb-3">
                              <label for="enddate">End Date <span class="text-danger">*</span></label>
                              <input type="date" name="enddate" id="enddate" class="form-control form-control-sm rounded-0" value="{{ old('enddate') }}"/>
                         </div>

                         <div class="col-md-6 mb-3">
                              <label for="starttime">Start Time <span class="text-danger">*</span></label>
                              <input type="time" name="starttime" id="starttime" class="form-control form-control-sm rounded-0" value="{{ old('starttime') }}"/>
                         </div>

                         <div class="col-md-6 mb-3">
                              <label for="endtime">End Time <span class="text-danger">*</span></label>
                              <input type="time" name="endtime" id="endtime" class="form-control form-control-sm rounded-0" value="{{ old('endtime') }}"/>
                         </div>
                    </div>

          =>Store Post 
               =In PostsController.php
                    public function store(Request $request)
                    {
                         $this->validate($request,[
                              "image" => "image|mimes:jpg,jpeg,png|max:1024",
                              "title" => "required|max:50|unique:posts,title",
                              "content" => "required",
                              "fee" => "required",
                              "startdate" => "required",
                              "enddate" => "required",
                              "starttime" => "required",
                              "endtime" => "required",
                              "type_id" => "required|in:1,2",
                              "tag_id" => "required",
                              "attshow" => "required|in:3,4",
                              "status_id" => "required|in:7,10,11",   
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $post = new Post();
                         $post->title = $request["title"];
                         $post->slug = Str::slug($request["name"]);
                         $post->content = $request["content"];
                         $post->fee = $request["fee"];
                         $post->startdate = $request["startdate"];
                         $post->enddate = $request["enddate"];
                         $post->starttime = $request["starttime"];
                         $post->endtime = $request["endtime"];
                         $post->type_id = $request["type_id"];
                         $post->tag_id = $request["tag_id"];
                         $post->attshow = $request["attshow"];
                         $post->status_id = $request["status_id"];
                         $post->user_id = $user_id;

                         // Single Image Upload
                         if(file_exists($request["image"])){
                              $file = $request["image"];
                              $fname = $file->getClientOriginalName();
                              $imagenewname = uniqid($user_id).$post['id'].$fname;
                              // $file->move(public_path("posts/img"),$imagenewname);
                              $file->move(public_path("assets/img/posts"),$imagenewname);
                              
                              $filepath = "assets/img/posts/".$imagenewname;
                              $post->image = $filepath;
                         }    

                         $post->save();
                         return redirect(route("posts.index"));
                    }

          =>List All Posts
               
               =>Joining Customize Foriegn Key name

                    =In PostsController.php
                         public function attstatus(){
                                        // related, foreignKey
                              return $this->belongsTo(Status::class,"attshow");
                                                       // related, foreignKey, ownerKey
                              // return $this->belongsTo(Status::class,"attshow","id");
                         }

                         
                         public function type(){
                                                            // related
                              // return $this->belongsTo(Type::class);
                                                            // related, foreignKey
                              // return $this->belongsTo(Type::class,"type_id");
                                                       // related, foreignKey, ownerKey
                              return $this->belongsTo(Type::class,"type_id","id");

                         }
                    
                    *laravel automatically recognize foreign key name by the naming convention rule of 'basetable_column'
                    *Customize foreign key name require additional parameter to pass.
                    *$this->belongsTo(relatedtable,foreignkey,primarykey);

                    =In index.blade.php
                         @foreach($posts as $idx=>$post)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td><img src="{{ asset($post->image) }}" class="rounded-circle" alt="{{$post->title}}" width="20" height="20"/> <a href="{{route('posts.show',$post->id)}}">{{ Str::limit($post->title,20) }}</a></td>
                                   <td>{{ $post->startdate }}</td>
                                   <td>{{ $post->enddate }}</td>
                                   <td>{{ $post->starttime }}</td>
                                   <td>{{ $post->endtime }}</td>
                                   <td>{{ $post->fee }}</td>
                                   <td>{{ $post->type->name }}</td>
                                   <td>{{ $post->tag->name }}</td>
                                   <td>{{ $post->attstatus["name"] }}</td>
                                   <td>{{ $post->status["name"] }}</td>
                                   <td>{{ $post->user["name"] }}</td>
                                   <td>{{ $post->created_at->format('d M Y') }}</td>
                                   <td>{{ $post->updated_at->format('d M Y') }}</td>
                                   <td>
                                        <a href="{{ route('posts.edit',$post->id) }}" class="text-info"><i class="fas fa-pen"></i></a>
                                        <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                                   </td>
                                   <form id="formdelete-{{ $idx }}" class="" action="{{route('posts.destroy',$post->id)}}" method="POST">
                                        @csrf
                                        @method("DELETE")
                                   </form>
                              </tr>
                              @endforeach
                    =>Be Careful
                         column name = method name
                         *Error

                         <td>{{ $post->attshow["name"] }}</td>

                          public function attstatus(){
                              return $this->belongsTo(Status::class,"attshow");
                         }

          =>Edit Post
               =In PostsController.php
                    public function edit(string $id)
                    {

                         $post = Post::findOrFail($id);
                         $attshows = Status::whereIn("id",[3,4])->get();
                         $statuses = Status::whereIn("id",[7,10,11])->get();
                         $tags = Tag::where("status_id",3)->get();
                         $types = Type::whereIn("id",[1,2])->get();

                         return view("posts.edit")->with("post",$post)->with("attshows",$attshows)->with("statuses",$statuses)->with("tags",$tags)->with("types",$types);
                    }

               =In edit.blade.php
                    <div class="col-md-12 mb-3">
                         <label for="title">Title <span class="text-danger">*</span></label>
                         <input type="text" name="title" id="title" class="form-control form-control-sm rounded-0" placeholder="Enter Post Title" value="{{ $post->title }}"/>
                    </div>

                    <div class="col-md-6">
                         <label for="type_id">Type <span class="text-danger">*</span></label>
                         <select name="type_id" id="type_id" class="form-control form-control-sm rounded-0">
                              @foreach($types as $type)
                                   <option value="{{$type->id}}"
                                        @if($type["id"] === $post["type_id"])
                                             selected
                                        @endif
                                   >{{ $type->name }}</option>
                              @endforeach
                         </select>
                    </div>

                    <div class="col-md-6 mb-3">
                         <label for="fee">Fee <span class="text-danger">*</span></label>
                         <input type="number" name="fee" id="fee" class="form-control form-control-sm rounded-0" placeholder="Class Fee" value="{{ $post->fee }}"/>
                    </div>

                    <div class="col-md-12 mb-3">
                         <label for="content">Content <span class="text-danger">*</span></label>
                         <textarea name="content" id="content" class="form-control form-control-sm rounded-0" rows="5" placeholder="Say Something....">{{$post->content}}</textarea>
                    </div>

                    <div class="col-md-3">
                         <label for="tag_id">Type <span class="text-danger">*</span></label>
                         <select name="tag_id" id="tag_id" class="form-control form-control-sm rounded-0">
                              @foreach($tags as $tag)
                                   <option value="{{$tag->id}}"
                                        @if($tag->id === $post["tag_id"])
                                             selected
                                        @endif
                                   >{{ $tag->name }}</option>
                              @endforeach
                         </select>
                    </div>

                    <div class="col-md-3">
                         <label for="attshow">Show on Att Form <span class="text-danger">*</span></label>
                         <select name="attshow" id="attshow" class="form-control form-control-sm rounded-0">
                              @foreach($attshows as $attshow)
                                   <option value="{{$attshow->id}}"
                                        @if($attshow["id"] === $post["attshow"])
                                             selected
                                        @endif
                                   >{{ $attshow->name }}</option>
                              @endforeach
                         </select>
                    </div>

                    <div class="col-md-3">
                         <label for="name">Status <span class="text-danger">*</span></label>
                         <select type="text" name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                              @foreach($statuses as $status)
                                   <option value="{{$status->id}}" {{ ($status->id === $post->status_id) ? "selected" : "" }} >{{ $status->name }}</option>
                              @endforeach
                         </select>
                    </div>

               *Ternary Operator Condition Checking

               =>Old New Image Show
                    =In edit.blade.php
                         <div class="row">
                              <div class="col-md-6 text-sm-center">
                                   <img src="{{asset($post->image)}}" width="200" alt="{{$post->title}}"/>
                              </div>
                              <div class="col-md-6">
                                   <label for="image" class="gallery"><span>Choose Images</span></label>
                                   <input type="file" name="image" id="image" class="form-control form-control-sm rounded-0" value="{{ $post->image }}" hidden/>
                              </div>
                         </div>

          =>Update Post
               =In PostsController.php
                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "image" => "image|mimes:jpg,jpeg,png|max:1024",
                              "title" => "required|max:50|unique:posts,title,".$id,
                              "content" => "required",
                              "fee" => "required",
                              "startdate" => "required",
                              "enddate" => "required",
                              "starttime" => "required",
                              "endtime" => "required",
                              "type_id" => "required|in:1,2",
                              "tag_id" => "required",
                              "attshow" => "required|in:3,4",
                              "status_id" => "required|in:7,10,11",   
                         ]);

                         $user = Auth::user();
                         $user_id = $user["id"];

                         $post = Post::findOrFail($id);
                         $post->title = $request["title"];
                         $post->slug = Str::slug($request["name"]);
                         $post->content = $request["content"];
                         $post->fee = $request["fee"];
                         $post->startdate = $request["startdate"];
                         $post->enddate = $request["enddate"];
                         $post->starttime = $request["starttime"];
                         $post->endtime = $request["endtime"];
                         $post->type_id = $request["type_id"];
                         $post->tag_id = $request["tag_id"];
                         $post->attshow = $request["attshow"];
                         $post->status_id = $request["status_id"];
                         $post->user_id = $user_id;


                         // Remove Old Image
                         if($request->hasFile("image")){
                              $path = $post->image;

                              if(File::exists($path)){
                                   File::delete($path);
                              }
                         }

                         // Single Image Update
                         if($request->hasFile("image")){
                              $file = $request->file("image");
                              $fname = $file->getClientOriginalName();
                              $imagenewname = uniqid($user_id).$post['id'].$fname;
                              $file->move(public_path("assets/img/posts"),$imagenewname);
                              
                              $filepath = "assets/img/posts/".$imagenewname;
                              $post->image = $filepath;
                         }    

                         $post->save();
                         return redirect(route("posts.index"));
                    }

          =>Delete Post
               =In PostsController.php  
                    public function destroy(string $id)
                    {
                         $post = Post::findOrFail($id);
                         
                         // Remove Old Image
                         $path = $post->image;
                         if(File::exists($path)){
                              File::delete($path);
                         }
                         
                         $post->delete();
                         return redirect()->back();
                    }

          =>Show Post
               =In PostsController.php
                    public function show(string $id)
                    {
                         $post = Post::findOrFail($id);
                         return view("posts.show",["post"=>$post]);
                    }
               =In show.blade.php
                    <div class="col-md-6">
                         <i class="fas fa-user fa-sm"></i> <span>{{$post["tag"]["name"]}}</span>
                         <br/>
                         <i class="fas fa-user fa-sm"></i> <span>{{$post["type"]["name"]}} : {{$post->fee}} </span>
                         <br/>
                         <i class="fas fa-user fa-sm"></i> <span>{{$post["user"]["name"]}}</span>
                    </div>
                    <div class="col-md-6">
                         <i class="fas fa-file fa-sm"></i> <span>{{$post["attstatus"]["name"]}}</span>
                         <br/>
                         <i class="fas fa-calendar-alt fa-sm"></i> <span>{{date('d M Y',strtotime($post->created_at))}} | {{date('h:i:s A',strtotime($post->created_at))}}</span>
                         <br/>
                         <i class="fas fa-edit fa-sm"></i> <span>{{date('d M Y h:i:s A',strtotime($post->updated_at))}}</span>
                    </div>
               
          =>Commenting Feature
               =Migration
                    php artisan make:model Comment -m

                    =create_comments_table.php
                         $table->text("description");
                         $table->unsignedBigInteger("user_id");
                         $table->unsignedBigInteger("commentable_id");
                         $table->string("commentable_type");

                    php artisan migrate:status
                    php artisan migrate
               
               =In Model (Comment.php)

                    protected $table = "comments";
                    protected $primaryKey = "id";
                    protected $fillable = [
                         "description",
                         "user_id",
                         "commentable_id",
                         "commentable_type"
                    ];

                    public function user(){
                         return $this->belongsTo(User::class);
                    }
                    
               php artisan make:controller CommentsController

               =In CommentsController.php
                    public function store(Request $request)
                    {

                         $user = Auth::user();
                         $user_id = $user->id;

                         Comment::create([
                              "description"=>$request["description"],
                              "user_id"=>$user_id,
                              "commentable_id"=>$request["commentable_id"],
                              "commentable_type"=>$request["commentable_type"],
                         ]);
                         return redirect()->back();
                    }

               =In show.blade.php
                    <form action="{{route('comments.store')}}" method="POST">
                         @csrf
                         <div class="col-md-12 d-flex justify-between">
                              <textarea name="description" id="description"  class="form-control border-0 rounded-0" rows="1" style="resize:none;" placeholder="Comment here...."></textarea>
                              <button type="submit" class="btn btn-info btn-sm text-light ms-3"><i class="fas fa-paper-plane"></i></button>
                         </div>

                         <!-- Start Hidden Fields -->
                         <input type="hidden" name="commentable_id" id="commentable_id" value="{{$post->id}}" />
                         <input type="hidden" name="commentable_type" id="commentable_type" value="App\Models\Post" />
                         <!-- Start Hidden Fields -->

                    </form>

                    *commentable_id, commentable_type is passed as hidden field.
                         -user don't need to manually choose this fields
                         -it must be filled by the system

               =In Web 
                    Route::resource("comments",CommentsController::class);

               =>Showing others related comments
                    =In Model (Comments)
                         public function commentable(){
                              return $this->morphTo();
                         }
                    =In Model (Post, User)
                         public function comments(){
                              return $this->morphMany(Comment::class,"commentable");
                         }
                    
                    =In PostsController.php
                         public function show(string $id)
                         {
                              $post = Post::findOrFail($id);
                              // $comments = Comment::where("commentable_id",$post->id)->where("commentable_type","App\Models\Posts")->orderBy("created_at","desc")->get();
                              $comments = $post->comments()->orderBy("updated_at","desc")->get();
                              return view("posts.show",["post"=>$post,"comments"=>$comments]);
                         }
                         
                         *Simple comments retrieve must check "commentable_id" and "commenetable_type"   
                         *Relationship retrieve no need to to check commentable columns
                         *latest comments reach at the top with orderBy()

                    =In show.blade.php
                         <ul class="list-group chat-boxs">
                              @foreach($comments as $comment)
                                   <li class="list-group-item mt-2">
                                        <div>
                                             <p>{{$comment->description}}</p>
                                        </div>
                                        <div>
                                             <span class="small fw-bold  float-end">{{$comment->user["name"] }} | {{$comment->created_at->diffForHumans()}}</span>
                                             
                                        </div>
                                        
                                   </li>
                              @endforeach
                         </ul>

                         ....
                         @section("css")
                              <style type="text/css">
                                   .chat-boxs{
                                        height: 200px;
                                        overflow-y : scroll;
                                   }
                              </style>     

                         @endsection

                         *show comment details 
                         *human readable date formate changing
                         *add scroll bar for many comments
                    
          =>Class Days
               php artisan make:controller DaysController

               =>Migration
                    php artisan make:model Day -m              

                    =create_days_table.php
                         $table->string("name")->unique();
                         $table->string("slug");
                         $table->unsignedBigInteger("status_id");
                         $table->unsignedBigInteger("user_id");
                    
                    php artisan migrate:status
                    php artisan migrate
               
               =>In Web
                    Route::resource("days",DaysController::class);
               Days
                    Sunday
                    Monday
                    Tuesday
                    Wednesday
                    Thursday
                    Friday
                    Saturday

               =>Create Modal    
                    =In categories > index.blade.php
                         <a href="#createmodal" class="btn btn-primary btn-sm rounded-0" data-bs-toggle="modal">Create</a>

                         <!-- start create modal -->
                              <div id="createmodal" class="modal fade">
                                   <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content rounded-0">
                                             <div class="modal-header">
                                                  <h6 class="modal-title">Create Form</h6>
                                                  <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                             </div>

                                             <div class="modal-body">
                                                  <form id="{{route('categories.store')}}" action="" method="POST">
                                                       {{ csrf_field() }}
                                                       <div class="row align-items-end">
                                                            <div class="col-md-7">
                                                                 <label for="name">Name <span class="text-danger">*</span></label>
                                                                 <input type="text" name="name" id="name" class="form-control form-control-sm rounded-0" placeholder="Enter Status Name" value="{{ old('name') }}"/>
                                                            </div>
                                                            
                                                            <div class="col-md-3 form-group">
                                                                 <label for="status_id">Status</label>
                                                                 <select name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                                                                      @foreach($statuses as $status)
                                                                           <option value="{{$status['id']}}">{{$status['name']}}</option>
                                                                      @endforeach     
                                                                 </select>
                                                            </div>
                                                            
                                   
                                                            <div class="col-md-2">
                                                                 <button type="submit" class="btn btn-primary btn-sm rounded-0">Submit</button>
                                                            </div>
                                                       </div>
                                                  </form>
                                             </div>

                                             <div class="modal-footer">

                                             </div>
                                        </div>
                                   </div>
                              </div>
                         <!-- end create modal -->

                         *data-bs-target="" don't need to set for <a> tag 
                         because <a> tag include href="" for target element

               =>Days in Create Post
                    =In PostsController.php
                         public function create()
                         {    
                              $attshows = Status::whereIn("id",[3,4])->get();
                              $days = Day::where("status_id",3)->get();
                              $statuses = Status::whereIn("id",[7,10,11])->get();
                              $tags = Tag::where("status_id",3)->get();
                              $types = Type::whereIn("id",[1,2])->get();

                              return view("posts.create",compact("attshows","days","statuses","tags","types"));
                         }
                    =In posts > create.blade.php
                         <div class="col-md-12 for-group">
                              <label for="">Days</label>
                              <div class="d-flex flex-wrap">
                                   @foreach($days as $idx=>$day)
                                        <div class="form-check form-switch mx-3">
                                             <input type="checkbox" name="day_id[]" id="day_id{{$idx}}" class="form-check-input" value="{{$day->id}}" checked/> <label for="day_id{{$idx}}">{{$day->name}}</label>
                                        </div>
                                   @endforeach
                              </div>
                         </div>

               =>Days of Post Storing method
                    Method 1
                         -days are stored at "posts" table
                              by adding 7 columns  
                         -these columns type are boolean
                    Method 2
                         -days are stored at "posts" table
                              by adding only 1 column  

                         -That column will be JSON format

                    Method 3
                         Many to Many
                         dayable
                         id post_id day_id

               =>Days of Post Store With (Polymorphic Many to Many)                              
                    =Migration
                         php artisan make:model Dayable -m
                         
                         =create_dayables_table.php
                              $table->integer("day_id");
                              $table->integer("dayable_id");
                              $table->string("dayable_type");
                         *id, and timestamps are dropped at this time.

                         php artisan migrate:status
                         php artisan migrate
                    
                    =In Model (Day)
                         protected $table = "dayables";
                         protected $fillable = [
                              "day_id",
                              "dayable_id",
                              "dayable_type"
                         ];
                    
                    =In PostsController.php
                         $post->save();

     
                         if($post->id){
                              // dd($request["day_id"]);

                              // create dayable
                              // Method 1
                              // if(count($request["day_id"]) > 0){
                                   
                              //     foreach($request["day_id"] as $key=>$value){
                              //         Dayable::create([
                              //             // "day_id"=>$request["day_id"][$key],
                              //             "day_id"=>$value,
                              //             "dayable_id"=>$post->id,
                              //             "dayable_type"=>$request["dayable_type"]
                              //         ]);
                              //     }
                              // }

                              // Methd 2
                              if(count($request["day_id"]) > 0){
                                             
                                   foreach($request["day_id"] as $key=>$value){
                                        $day = [
                                        // "day_id"=>$request["day_id"][$key],
                                        "day_id"=>$value,
                                        "dayable_id"=>$post["id"],
                                        "dayable_type"=>$request["dayable_type"]
                                        ];
                                        Dayable::insert($day);
                                   }
                              }

                         }
                         

                         *store days after saving post.
                         *Successfully saved post id is already generated. It is ready for use.
                         
                         *day_id is given as array. This array need to iterate a looping.
                              array:7 [
                              0 => "1"
                              1 => "2"
                              2 => "3"
                              3 => "4"
                              4 => "5"
                              5 => "6"
                              6 => "7"
                              ]
                              -only the checked days are in the arrays.
                         
                         *dayable_type can be written directly at the Controller because it is only for the post.
                              In CommentController, it can not be written directly and given from the form.

                    =In create.blade.php
                         <!-- start hidden field -->
                                   <input type="hidden" name="dayable_type" id="dayable_type" value="App\Models\Post" />
                         <!-- end hidden field -->
                    
                    *error(Unknown column 'updated_at' in 'field list')
                         timestamps() are dropped at the migrations. Laravel automatically insert these columns.
                    
                    =In Model Dayable.php
                         protected $timestamps = false;

                    *error (Access level to App\Models\Dayable::$timestamps must be public)
                         public $timestamps = false;
                    
                    *while error occur, new post is successfully saved to the posts table. becausse these errors occur after saving post.

                    *after inserting a post, days related to this post is stored in dayable table.
                    "dayables"
                    day_id    dayable_id     dayable_type
                    2         18             App\Model\Post
                    4         18   
                    6         18

               =>Days in Edit Post
                    =In Model (Post.php)
                         public function days(){
                              return $this->morphToMany(Day::class,"dayable");
                         }
                    
                    =In Model (Day.php)
                         public function posts(){
                              return $this->morphedByMany(Post::class,"dayable");
                         }

                    =In PostsController.php
                         public function edit(string $id)
                         {

                              $post = Post::findOrFail($id);
                              // dd($post); // Post object
                              $days = Day::where("status_id",3)->get();
                              $dayables = $post->days()->get();
                              // dd($dayables); // Day object
                              $attshows = Status::whereIn("id",[3,4])->get();
                              $statuses = Status::whereIn("id",[7,10,11])->get();
                              $tags = Tag::where("status_id",3)->get();
                              $types = Type::whereIn("id",[1,2])->get();

                              return view("posts.edit")->with("post",$post)->with("attshows",$attshows)->with("days",$days)->with("dayables",$dayables)->with("statuses",$statuses)->with("tags",$tags)->with("types",$types);
                         }
                         *Query laravel executing in background (study from error)
                              select `days`.*, `dayables`.`dayable_id` as `pivot_dayable_id`, `dayables`.`dayable_type` as `pivot_dayable_type` from `days` inner join `dayables` on `days`.`id` = `dayables`.`dayable_id` where `dayables`.`dayable_id` = 18 and `dayables`.`dayable_type` = App\Models\Post
                         *$dayables get the relative days with the post
                         *not working
                              @if($dayable['day_id'] === $day['id'])
                              -because it is retrieved from dummy table and not from regular table.
                         *Regular Post Object
                              App\Models\Post {#1411  // app\Http\Controllers\PostsController.php:137
                              #connection: "mysql"
                              #table: "posts"
                              #primaryKey: "id"
                              ....
                              #original: array:17 [
                                   "id" => 18
                                   "image" => null
                                   "title" => "React Js Batch 10"
                                   "slug" => ""
                                   "content" => "hello sir"
                                   "fee" => "90000.00"
                                   "startdate" => "2023-12-22"
                                   "enddate" => "2024-01-30"
                                   "starttime" => "06:17:00"
                                   "endtime" => "08:20:00"
                                   "type_id" => 1
                                   "tag_id" => 11
                                   "attshow" => 3
                                   "status_id" => 7
                                   "user_id" => 1
                                   "created_at" => "2024-01-14 17:18:36"
                                   "updated_at" => "2024-01-14 17:18:36"
                              ]

                         *Eloquent Collection Object
                              Illuminate\Database\Eloquent\Collection {#1415  // app\Http\Controllers\PostsController.php:140
                                   #items: array:3 [
                                   0 => App\Models\Day {#1404 
                                        #connection: "mysql"
                                        #table: "days"
                                        #primaryKey: "id"
                                        ....
                                        #original: array:10 [
                                        "id" => 2
                                        "name" => "Monday"
                                        "slug" => "monday"
                                        "status_id" => 3
                                        "user_id" => 1
                                        "created_at" => "2024-01-13 15:27:05"
                                        "updated_at" => "2024-01-13 15:27:05"
                                        "pivot_dayable_id" => 18
                                        "pivot_day_id" => 2
                                        "pivot_dayable_type" => "App\Models\Post"
                                        ]
                                        ....
                                   }
                                   1 => App\Models\Day {#1427 }
                                   2 => App\Models\Day {#1430 }
                                   ]
                                   #escapeWhenCastingToString: false
                              }
                              *Dummy table columlns can be retrived with keyword pivot
                         
                         -it is essential to check 'original'
                         
                         *not working
                              @if($dayable['pivot_day_id'] === $day['id'])
                              -it has specific method to retrieve pivot.

                    =In posts > edit.blade.php
                         @foreach($days as $idx=>$day)
                              <div class="form-check form-switch mx-3">
                                   <input type="checkbox" name="day_id[]" id="day_id{{$idx}}" class="form-check-input" value="{{$day->id}}" 
                                        @foreach($dayables as $dayable)
                                             @if($dayable['id'] === $day['id'])
                                                  checked
                                             @endif
                                        @endforeach
                                   /> 
                                   <label for="day_id{{$idx}}">{{$day->name}}</label>
                              </div>
                         @endforeach

               =>Days in Show Post
                    =In PostsController.php
                         public function show(string $id)
                         {
                              $post = Post::findOrFail($id);
                              // $comments = Comment::where("commentable_id",$post->id)->where("commentable_type","App\Models\Posts")->orderBy("created_at","desc")->get();
                              $comments = $post->comments()->orderBy("updated_at","desc")->get();
                              $dayables = $post->days()->get();
                              return view("posts.show",["post"=>$post,"comments"=>$comments,"dayables"=>$dayables]);
                         }
                    =In posts > show.blade.php
                         <div class="col-md-6">
                              <i class="fas fa-calendar fa-sm"></i>
                              <span>
                                   @foreach($dayables as $dayable)
                                             {{$dayable["name"]}}, 
                                   @endforeach
                              </span>
                         </div>

               =>Days of Post Update
                    three condition
                    -remove existing days
                    -add days
                    -add and remove days

                    =My own method 1
                         $post->save();

                         if($request["day_id"] > 0){
                              // dd($request["day_id"]);
                              $post->days()->sync($request["day_id"]);
                         }else{
                              $post->days()->detach();
                         }

                    =Chingu method
                         if(count($request["day_id"] > 0)){
                              $post->days()->detach();

                              foreach($request["day_id"] as $key=>$value){
                                   Dayable::create([
                                   "day_id"=>$value,
                                   "dayable_id"=>$post->id,
                                   "dayable_type"=>$request["dayable_type"]
                                   ]);
                              }
                         }

                         *error - when no date is specified.
                              -at code of condition, count()
                         
                              
                         *code operation
                              firstly remove all days related with the post
                              lastly add the selected days for the post
                              at "dayable" table
                              -before edit
                                   day_id    dayable_id
                                   1         1
                                   1         2
                                   2         2
                              -after edit (adding another day for post one)
                                   day_id    dayable_id
                                   1         2
                                   2         2
                                   1         1
                                   4         1
                    
                    =My own method 2
                         $post->save();
                         
                         $post->days()->detach();
                         if(!empty($request["day_id"])){
                              foreach($request["day_id"] as $key=>$value){
                                   Dayable::create([
                                   "day_id"=>$value,
                                   "dayable_id"=>$post->id,
                                   "dayable_type"=>$request["dayable_type"]
                                   ]);
                              }
                         }
                         
                         
                    =With JS method
                         =In posts > edit.blade.php
                              @foreach($days as $idx=>$day)
                                   <div class="form-check form-switch mx-3">
                                        <input type="checkbox" name="day_id[]" id="day_id{{$idx}}" class="form-check-input dayactions" value="{{$day->id}}" 
                              ....

                              // Start Day Action
                              $(".dayactions").click(function(){
                                   var checkboxs = $("input[type='checkbox']");
                                   // console.log(checkboxs);
                                   
                                   var checked = checkboxs.filter(":checked").map(function(){
                                        // return this.value;
                                        $(this).attr("name","newday_id[]");
                                   });

                                   var unchecked = checkboxs.not(":checked").map(function(uncheck){
                                        // return this.value;
                                        $(this).attr("name","oldday_id[]");
                                        
                                        // console.log(uncheck);
                                   });

                                   // check or uncheck
                                   // if($(this).prop('checked')){
                                   //      // console.log("yes");
                                   //      console.log("checked");
                                   // }else{
                                   //      // console.log("no");
                                   //      console.log("unchecked");
                                   // }
                              });
                              // End Day Action
                              
                         *seperate the days into the group of checked and unchecked.
                         -checked group = newday_id
                         -unchecked group = oldday_id

                         =In PostsController.php
                               $post->save();
                              
                              // Start Day Action
                              // dd($request["newday_id"]); // null ,or [1 3 5]
                              
                                   if(isset($request["newday_id"])){
                                        // remove all day first
                                        foreach($request["newday_id"] as $key=>$value){
                                             $dayable = Dayable::where("dayable_id",$post["id"])->where("dayable_type",$request["dayable_type"]);
                                             $dayable->delete();
                                        }
                                        // add renewday
                                        foreach($request["newday_id"] as $key=>$value){
                                             $day = [
                                             // "day_id"=>$request["day_id"][$key],
                                             "day_id"=>$request["newday_id"][$key],
                                             "dayable_id"=>$post["id"],
                                             "dayable_type"=>$request["dayable_type"]
                                             ];
                                             Dayable::insert($day);
                                        }
                                   }
                              // End Day Action
                              -firstly remove all days related with the post
                              -lastly add the new days for the post
                              *no error but not working - when no date is specified.
                              
                              -problem solved
                                   if(isset($request["newday_id"]) || isset($request["oldday_id"])){
                                        // remove all days
                                        if(!empty($request["newday_id"])){
                                             
                                             // add new days
                                        }
                                   }


     =>Attendance Form
          =Migration
          php artisan make:model Attendance -m
          
          =crate_attendances_table.php
               $table->date("classdate");
               $table->unsignedBigInteger("post_id");
               $table->string("attcode");    
               $table->unsignedBigInteger("user_id");        
               

          php artisan migrate:status
          php artisan migrate

          php artisan make:controller AttendancesController

          =In Model (Attendance.php)
               protected $table = "attendances";
               protected $primaryKey = "id";
               protected $fillable = [
                    "classdate",
                    "post_id",
                    "attcode",
                    "user_id"
               ];

               public function post(){
                    return $this->belongsTo(Post::class);
               }

               public function user(){
                    return $this->belongsTo(User::class);
               }

          =>Create/Store Attendance + index

               =In AttendancesController.php
                    public function index()
                    {
                         $attendances = Attendance::all();
                         // $posts = Post::where("attshow",3)->get();
                         $posts = DB::table("posts")->where("attshow",3)->orderBy("title","asc")->get();
                         return view("attendances.index",compact("attendances","posts"));
                    }

                    public function store(Request $request)
                    {
                         $this->validate($request,[
                              "classdate" => "required|date",
                              "post_id" => "required",
                              "attcode" => "required"
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $attendance = new attendance();
                         $attendance->classdate = $request["classdate"];
                         $attendance->post_id = $request["post_id"];
                         $attendance->attcode = $request["attcode"];
                         $attendance->user_id = $user_id;
                         
                         $attendance->save();
                         return redirect(route("attendances.index"));
                    }
               
               =In index.blade.php
                    <form action="{{route('attendances.store')}}" method="POST">
                         {{ csrf_field() }}

                         <div class="row align-items-end">
                              <div class="col-md-3">
                                   <label for="classdate">Class Date <span class="text-danger">*</span></label>
                                   <input type="date" name="classdate" id="classdate" class="form-control form-control-sm rounded-0" value="{{ old('classdate') }}"/>
                              </div>

                              <div class="col-md-3">
                                   <label for="post_id">Class <span class="text-danger">*</span></label>
                                   <select name="post_id" id="post_id" class="form-control form-control-sm rounded-0">
                                        @foreach($posts as $post)
                                             {{-- <option value="{{$post['id']}}">{{$post['title']}}</option> --}}
                                             <option value="{{$post->id}}">{{$post->title}}</option> 
                                        @endforeach     
                                   </select>
                              </div>

                              <div class="col-md-3">
                                   <label for="attcode">Attendance Code <span class="text-danger">*</span></label>
                                   <input type="text" name="attcode" id="attcode" class="form-control form-control-sm rounded-0" value="{{ old('attcode') }}"/>
                              </div>

                              <div class="col-md-3">
                                   <button type="reset" class="btn btn-secondary btn-sm rounded-0">Cancel</button>
                                   <button type="submit" class="btn btn-primary btn-sm rounded-0 ms-3">Submit</button>
                              </div>
                         </div>
                    </form>
               
               ** Retrieve data with DB:: method need to be careful
                    -can only get data as object
                    -can not get data as array
                         *error (Cannot use object of type stdClass as array)

               =>List Attendances

                    =In index.blade.php
                         <table id="mytable" class="table table-sm table-hover border">
               
                              <thead>
                                   <th>No</th>
                                   <th>Class</th>
                                   <th>Att Code</th>
                                   <th>By</th>
                                   <th>Class Date</th>
                                   <th>Created At</th>
                                   <th>Updated At</th>
                                   <th>Action</th>
                              </thead>
                    
                              <tbody>
                                   @foreach($attendances as $idx=>$attendance)
                                   <tr>
                                        <td>{{++$idx}}</td>
                                        <td>{{$attendance->post["title"]}}</td>
                                        <td>{{ $attendance->attcode }}</td>
                                        <td>{{ $attendance["user"]["name"] }}</td>
                                        <td>{{ $attendance->classdate }}</td>
                                        <td>{{ $attendance->created_at->format('d M Y') }}</td>
                                        <td>{{ $attendance->updated_at->format('d M Y') }}</td>
                                        <td>
                                             <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$attendance->id}}" data-name="{{$attendance->name}}" data-status="{{$attendance->status_id}}"><i class="fas fa-pen"></i></a>
                                        </td>
                                   </tr>
                                   @endforeach
                              </tbody>
                    
                         </table>

          =>Edit/Update Attendance + index
               =In index.blade.php
                    ....
                    <td>
                         <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$attendance->id}}" data-post_id="{{$attendance->post_id}}" data-attcode="{{$attendance->attcode}}"><i class="fas fa-pen"></i></a>
                    </td>
                    ....
                    
                    <!-- start edit modal -->
                         <div id="editmodal" class="modal fade">
                              <div class="modal-dialog modal-dialog-centered">
                                   <div class="modal-content rounded-0">
                                        <div class="modal-header">
                                             <h6 class="modal-title">Edit Form</h6>
                                             <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                        </div>

                                        <div class="modal-body">
                                             <form id="formaction" action="" method="POST">
                                                  {{ csrf_field() }}
                                                  {{ method_field('PUT') }}
                                                  <div class="row align-items-end">
                                                       
                                                       <div class="col-md-7 form-group">
                                                            <label for="editpost_id">Class <span class="text-danger">*</span></label>
                                                            <select name="post_id" id="editpost_id" class="form-control form-control-sm rounded-0">
                                                                 @foreach($posts as $post)
                                                                      {{-- <option value="{{$post['id']}}">{{$post['title']}}</option> --}} 
                                                                      <option value="{{$post->id}}">{{$post->title}}</option> 
                                                                 @endforeach     
                                                            </select>
                                                       </div>

                                                       <div class="col-md-3">
                                                            <label for="editattcode">Att Code <span class="text-danger">*</span></label>
                                                            <input type="text" name="attcode" id="editattcode" class="form-control form-control-sm rounded-0" value="{{ old('classdate') }}"/>
                                                       </div>
                                                       
                              
                                                       <div class="col-md-2">
                                                            <button type="submit" class="btn btn-primary btn-sm rounded-0">Update</button>
                                                       </div>
                                                  </div>
                                             </form>
                                        </div>

                                        <div class="modal-footer">

                                        </div>
                                   </div>
                              </div>
                         </div>
                    <!-- end edit modal -->
                    ....
                    @section("scripts")
                         <script type="text/javascript">
                              $(document).ready(function(){
                                   // Start Edit Form
                                   $(document).on("click",".editform",function(e){
                                        
                                        $("#editpost_id").val($(this).attr("data-post_id"));
                                        $("#editattcode").val($(this).data("attcode"));
                                        
                                        const getid = $(this).attr("data-id");
                                        $("#formaction").attr("action",`/attendances/${getid}`);

                                        e.preventDefault();
                                   });
                                   // End Edit Form
                                   
                              });
                         </script>
                    @endsection
               
               =In AttendancesController.php
                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "post_id" => "required",
                              "attcode" => "required"
                         ]);

                         $user = Auth::user();
                         $user_id = $user["id"];

                         $attendance = Attendance::findOrFail($id);
                         $attendance->post_id = $request["post_id"];
                         $attendance->attcode = $request["attcode"];
                         $attendance->user_id = $user_id;
                         $attendance->save();
                         return redirect(route("attendances.index"));
                    }

               *when another modify att code, modify user id will changed
               -To solve this delete the following sentence
                    //$attendance->user_id = $user_id;
               
     =>Enrollment

          php artisan make:model Stage -m

          =Migration
               =create_stages_table.php
                    $table->string("name")->unique();
                    $table->string("slug");  
                    $table->unsignedBigInteger("status_id");
                    $table->unsignedBigInteger("user_id");

          php atisan migratel:status
          php artisan migrate

          =In Model (Stage.php)

          php artisan make:controller StagesController

          "stages"
               Approved
               Pending
               Reject
               Complete
               Incomplete
               Loading
               Processing
               Passed
               Request
               Waiting
               Verifying
               Verified

          php artisan make:model Enroll -m 

          =Migration
               =create_enrolls_table
                    $table->string("image")->nullable();
                    $table->unsignedBigInteger('post_id')->comment("new class");
                    $table->unsignedBigInteger('user_id');
                    $table->enum('stage_id',[1,2,3])->default(2)->comment("1=Approved, 2= Pending, 3=Reject");
                    $table->text("remark")->nullable();
          
               =>Column Comment
                    *comment() - to remark something for the column
                    =In phpmyadmin
                    -see at table 'Structure' Tab
                    -see at 'Browse' Tab
          
          php atisan migratel:status
          php artisan migrate

          =In Model (Enroll.php)
               protected $table = "enrolls";
               protected $primaryKey = "id";
               protected $fillable = [
                    "image",
                    "post_id",
                    "user_id",
                    "stage_id",
                    "remark"
               ];

               public function stage(){
                    return $this->belongsTo(Stage::class);
               }

               public function user(){
                    return $this->belongsTo(User::class);
               }

          =In posts > show.blade.php
               ....
               <a href="{{route('posts.index')}}" class="btn btn-secondary btn-sm rounded-0">Close</a>
               <a href="#createmodal" class="btn btn-primary btn-sm rounded-0" data-bs-toggle="modal">Enroll</a>
               ....
               <!-- START MODAL AREA -->
                    <!-- start create modal -->
                    <div id="createmodal" class="modal fade">
                         <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content rounded-0">
                                   <div class="modal-header">
                                        <h6 class="modal-title">Enroll Form</h6>
                                        <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                   </div>

                                   <div class="modal-body">
                                        <form id="" action="{{route('categories.store')}}" method="POST" enctype="multipart/form-data">
                                             {{ csrf_field() }}
                                             <div class="row align-items-end">
                                                  <div class="col-md-12 mb-3">
                                                       <label for="image" class="gallery"><span>Choose Images</span></label>
                                                       <input type="file" name="image" id="image" class="form-control form-control-sm rounded-0" value="{{ old('image')}}" hidden/>
                                                  </div>
                                                  <div class="col-md-10">
                                                       <label for="remark">Remark <span class="text-danger">*</span></label>
                                                       <textarea type="text" name="remark" id="remark" class="form-control form-control-sm rounded-0" rows="3" placeholder="Enter Remark">{{ old('remark') }}</textarea>
                                                  </div>
                                                  
                                   
                                                  <div class="col-md-2">
                                                       <button type="submit" class="btn btn-primary btn-sm rounded-0">Submit</button>
                                                  </div>

                                                  <!-- Start Hidden Fields -->
                                                  <input type="hidden" name="post_id" value="{{$post->id}}" />
                                                  <!-- Start Hidden Fields -->
                                             </div>
                                        </form>
                                   </div>

                                   <div class="modal-footer">

                                   </div>
                              </div>
                         </div>
                    </div>
                    <!-- end create modal -->
               <!-- END MODAL AREA -->
               ....
               @section("css")....
               @section("scripts")....
          *form fields data can't be received at controller if not include
               enctype="multipart/form-data" 
          =In Controller
               php artisan make:controller EnrollsController
          
          =In EnrollsController.php
               public function store(Request $request)
               {
                    $this->validate($request,[
                         "image" => "image|mimes:jpg,jpeg,png|max:1024",
                    ]);

                    $user = Auth::user();
                    $user_id = $user->id;

                    $enroll = new Enroll();
                    $enroll->post_id = $request["post_id"];
                    $enroll->remark = $request["remark"];
                    $enroll->user_id = $user_id;

                    // Single Image Upload
                    if(file_exists($request["image"])){
                         $file = $request["image"];
                         $fname = $file->getClientOriginalName();
                         $imagenewname = uniqid($user_id).$enroll['id'].$fname;
                         // $file->move(public_path("enrolls/img"),$imagenewname);
                         $file->move(public_path("assets/img/enrolls"),$imagenewname);
                         
                         $filepath = "assets/img/enrolls/".$imagenewname;
                         $enroll->image = $filepath;
                    }    

                    $enroll->save();
                    return redirect()->back();
               }

               =>Restrict One User for only One Class
                    =In Post.php
                         public function checkenroll($userid){
                              return DB::table("enrolls")->where("post_id",$this->id)->where("user_id",$userid)->exists();
                         }

                    =In PostsController.php
                         public function show(string $id)
                         {    
                              $post = Post::findOrFail($id);
                              // dd($post->checkenroll(1)); // true
                              ....
                         }
                    =In posts > show.blade.php    
                         <a href="{{route('posts.index')}}" class="btn btn-secondary btn-sm rounded-0">Close</a>
                         @if(!$post->checkenroll($userdata->id))
                              <a href="#createmodal" class="btn btn-primary btn-sm rounded-0" data-bs-toggle="modal">Enroll</a>
                         @endif;    
                         <hr/>
                    
                    *'Enroll' button is hidden for the already enrolled post.
                    *'Enroll' button appear for the the post that is not enroled yet.

                    *$userdata represent authenticated user.

                    users
                    name           email
                    --------------------
                    admin          admin@gmail.com
                    aung aung      admin@gmail.com
                    su su          susu@gmail.com
                    yu yu          yuyu@gmail.com

                    =>Log Out
                         =Inspire layouts > navigation.blade.php 
                              <!-- Authentication -->
                              <form method="POST" action="{{ route('logout') }}">
                                   @csrf

                                   <x-dropdown-link :href="route('logout')"
                                             onclick="event.preventDefault();
                                                       this.closest('form').submit();">
                                        {{ __('Log Out') }}
                                   </x-dropdown-link>
                              </form>

                         =In layouts > adminleftsidebar.blade.php
                              <!-- Start Top Sidebar -->
                              @include("layouts.adminnavbar")
                              <!-- End Top Sidebar -->

                         =In layouts > adminnavbar.blade.php
                              //move top side bar
                              <!-- Authentication -->
                               <!-- <form action="{{ route('logout')}}" method="POST" > -->
                                   <!-- @csrf -->
                                   <!-- <a href="{{ route('logout') }}" class="dropdown-item" onclick="event.preventDefault(); this.closest('form').submit();"><i class="fas fa-sign-out fa-sm text-muted me-2"></i>Logout</a> -->
                                   <!-- <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); this.parentElement.submit();"><i class="fas fa-sign-out fa-sm text-muted me-2"></i>Logout</a> -->
                              <!-- </form> -->

                              <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); document.getElementById('logoutform').submit();"><i class="fas fa-sign-out fa-sm text-muted me-2"></i>Logout</a>
                              <form id="logoutform" action="{{ route('logout') }}" method="POST" >@csrf</form>

                    "students"
                    id   regnumber      firstname      lastname,,,,        user_id
                    1    WDF1001        Admin          Bot                 1
                    2    WDF1002        Aung           Aung                2
                    3    WDF1003        Su             Su                  3
                    4    WDF1004        Yu             Yu                  4

     =>Attendance <-> Student (Student ID)
               =>My Method
                    =In Attendance.php
                         public function userstu(){
                              $student = Student::where("user_id",$this->user_id)->first();

                              // dd($student);
                              // dd($student->regnumber);
                              return $student;
                         }
                         // *retrieve with get() will get error
                    =In attendances > index.blade.php
                         ....
                         @foreach($attendances as $idx=>$attendance)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td>{{ $attendance->userstu()->regnumber }}</td>
               
               =>Simplest Solution (don't recommend)
                    =In Attendance.php
                         public function student(){
                              return $this->belongsTo(Student::class,"user_id");
                         }
                    =In attendances > index.blade.php
                         @foreach($attendances as $idx=>$attendance)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td>{{ $attendance->student->regnumber }}</td>

                    "students"
                    id   regnumber      firstname      lastname,,,,        user_id
                    10    WDF1001        Admin          Bot                 1

                    *error (Attempt to read property "regnumber" on null)
                    -it only work with student.id for the foreigin key of attendances.user_id.
                    -because "attendances" table do not the student id, 1 of user_id, 1 .
               
               "users"
                    id     name           email
                    10     admin          admin@gmail.com
                    20     aung aung      admin@gmail.com
                    30     su su          susu@gmail.com
                    40     yu yu          yuyu@gmail.com

               "students"
                    id   regnumber      firstname      lastname,,,,        user_id
                    1    WDF1001        Admin          Bot                 10
                    2    WDF1002        Aung           Aung                20
                    3    WDF1003        Su             Su                  30
                    4    WDF1004        Yu             Yu                  40

               "attendances"
                    id   classdate      post_id   attcode   user_id
                    1    2023-12-02     17        AB        10
                    ....
                    6    2023-12-16     16        EFG       40
               
               =>Way 1 (Foreigh Key Table)
                    "Attendance"   "User"         "Student"
                    
                    user_id        id             id
                    post_id        name           regnumber
                    attcode        email          firstname   
                                   password       lastname
                    student_id                    user_id

               =>Way 2 (Table Through)
                    Attendance -> User -> Student

                    Attendance 
                    id classdate post_id attcode user_id

                    User
                    id name email .... student_id

                    Student 
                    id   regnumber      firstname      lastname,,,,

               =Method 1
                    =In Attendance.php
                         public function student($userid){
                              
                              $students = Student::where("user_id",$userid)->get();
                              // dd($students);

                              foreach($students as $student){
                                   // dd($student);
                                   // dd($student["regnumber"]);
                                   return $student["regnumber"];
                              }
                         }

                    *result ($students) - array given
                    Illuminate\Database\Eloquent\Collection {#1431  // app\Models\Attendance.php:41
                         #items: array:1 [
                         0 => App\Models\Student {#1430 }
                         ]
                         #escapeWhenCastingToString: false
                    }
                    
                    *result ($student) ## - destructure array
                    App\Models\Student {#1430  // app\Models\Attendance.php:44
                         #connection: "mysql"
                         #table: "students"
                         #primaryKey: "id"
                         ....
                         #original: array:10 [
                         "id" => 1
                         "regnumber" => "WDF1001"
                         "firstname" => "Admin"
                         "lastname" => "Boot"
                         "slug" => "adminboot"
                         "remark" => "Lorem Ipsum is simply dummy text of the printing and typesetting industry."
                         "status_id" => 1
                         "user_id" => 1
                         "created_at" => "2023-12-14 12:43:02"
                         "updated_at" => "2023-12-14 12:43:02"
                    ]

                    =In attendances > index.blade.php
                         @foreach($attendances as $idx=>$attendance)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td>{{ $attendance->student($attendance->user_id) }}</td>
               
               =Method 2
                    =In Attendance.php
                         public function student($userid){
                              // Method 2
                              $students = Student::where("user_id",$userid)->get()->pluck("regnumber");
                              // dd($students);

                              foreach($students as $student){
                                   // dd($student); // "WDF1001"
                                   return $student;
                              }
                         }

                    *result ($students) - array given
                    Illuminate\Support\Collection {#1422  // app\Models\Attendance.php:51
                         #items: array:1 [
                         0 => "WDF1001"
                         ]
                         #escapeWhenCastingToString: false
                    }

               =>Attendance Order
                    =In AttendancesController.php
                         public function index()
                         {
                              $attendances = Attendance::orderBy('updated_at','desc')->get();
                              ....
                         }
                    *attendances are displayed from recent days.

     =>Text Editor Plug-in    
          'summernote'        
          https://summernote.org/getting-started/#without-bootstrap-lite

          bootstrap 4
          bootstrap 5
          *Without bootstrap
               -local link
          
          summernote > Getting Started > Download compiled
          Extract here - summernote-0.8.18-dist

          =>At Create
               =In posts > create.blade.php
                    <div class="col-md-12 mb-3">
                         <label for="content">Content <span class="text-danger">*</span></label>
                         <textarea name="content" id="content" class="form-control form-control-sm rounded-0" rows="5" placeholder="Say Something....">{{ old('content') }}</textarea>
                    </div>
                    ....

                    @section("css")
                         {{-- summernote css1 js1 --}}
                         <link href="{{ asset('assets/libs/summernote-0.8.18-dist/summernote-lite.min.css') }}" rel="stylesheet" type="text/css"/>
                         <style type="text/css">
                         ....

                    @section("scripts")
                         {{-- summernote css1 js1 --}}
                         <script src="{{ asset('assets/libs/summernote-0.8.18-dist/summernote-lite.min.js') }}" type="text/javascript"></script>
                         <script type="text/javascript">
                         ....

                              // text editor for content
                              $('#content').summernote({
                                   placeholder: 'Say Something....',
                                   tabsize: 2,
                                   height: 120,
                                   toolbar: [
                                        ['style', ['style']],
                                        ['font', ['bold', 'underline', 'clear']],
                                        ['color', ['color']],
                                        ['para', ['ul', 'ol', 'paragraph']],
                                        ['insert', ['link']],
                                   ]
                              });

               
          =>At Edit
               =link summbernote as Create 

               *Edited text will be display as format.

          =>At Show
               =http://127.0.0.1:8000/posts/19
                    *result
                    <h2 style="margin-bottom: 10px; font-family: DauphinPlain; font-size: 24px; line-height: 24px; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">What is Lorem Ipsum?</h2><p><strong style="font-family: &quot;Open Sans&quot;, Arial, sans-serif; font-size: 14px; text-align: justify; background-color: rgb(255, 255, 255);">Lorem Ipsum</strong><span style="font-family: &quot;Open Sans&quot;, Arial, sans-serif; font-size: 14px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the <a href="https://google.com" target="_blank">1500s</a>
               "phpmyadmin" > "posts" table > 'content' column
               *html & css code are stored.

               =To interpret html and css code
                    =In posts > show.blade.php
                         <tr>
                              <!-- <td>{{-- $post->content --}}</td> -->
                              <td>{!! $post->content !!}</td>
                         </tr>
               *other editor plug-in will use {!! !!} to understand html and css code.

     =>Table Plug in
          "DataTables"
          https://datatables.net/
          *cdn

          *cause it is jQuery library, jQuery file must be linked first.

          Full Getting Started Guide > 
               Initialising DataTables

          =In Index 
               =In posts > index.blade.php
                    <table id="mytable" class="table table-sm table-hover border">
                    ....

                    @section("css")
                         <link href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
                    @endsection
                    ....

                    @section("scripts")
                    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js" type="text/javascript"></script>
                    <script type="text/javascript">
                         ....
                         // for mytable
                         //let table = new DataTable('#mytable');
                         $("#mytable").DataTable();

               *Search, Column Sorting, Pagination included
               *search bar is for all column 

          =Method 1 (JS Object)
               let table = new DataTable('#myTable', {
               // config options...
               })

          =Method 2 (jQuery)
               $(document).ready( function () {
                    $('#myTable').DataTable();
               } );

     =>Fixed footer
          =In layouts > adminfooter.php 
               <footer class="footers">
          
          =In public > dist > style.css
               .footers{
                    width:100%;

                    position:fixed;
                    right:0;
                    bottom:0;
               }
     
     =>Enroll <-> Student (Student ID)

          =Method 1, 2
                =In enrolls.index.blade.php
                    <table id="mytable" class="table table-sm table-hover border">
               
                         <thead>
                              <th>No</th>
                              <th>Class</th>
                              <th>Student Id</th>
                              <th>Stage</th>
                              <th>Created At</th>
                              <th>Updated At</th>
                              <th>Action</th>
                         </thead>
               
                         <tbody>
                              @foreach($enrolls as $idx=>$enroll)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td>{{$enroll->post["title"]}}</td>
                                   <td>{{ $enroll->student($enroll->user_id) }}</td>
                                   <td>{{ $enroll->stage->name }}</td>
                                   <td>{{ $enroll->created_at->format('d M Y') }}</td>
                                   <td>{{ $enroll->updated_at->format('d M Y') }}</td>
                                   <td>
                                        <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$enroll->id}}" data-post_id="{{$enroll->post_id}}" data-attcode="{{$enroll->attcode}}"><i class="fas fa-pen"></i></a>
                                   </td>
                              </tr>
                              @endforeach
                         </tbody>
               
                    </table>

               =Enroll.php
                    public function student($userid){
                         
                         // Method 1
                         // $students = Student::where("user_id",$userid)->get();
                         // // dd($students);

                         // foreach($students as $student){
                         //     // dd($student);
                         //     // dd($student["regnumber"]);
                         //     return $student["regnumber"];
                         // }

                         // Method 2
                         $students = Student::where("user_id",$userid)->get()->pluck("regnumber");
                         // dd($students);

                         foreach($students as $student){
                              // dd($student); // "WDF1001"
                              return $student;
                         }

                    }
         
          =Method 3, 4
               =In enrolls > index.blade.php
                    @foreach($enrolls as $idx=>$enroll)
                         <tr>
                              <td>{{++$idx}}</td>
                              <td>{{$enroll->post["title"]}}</td>
                              {{-- <td>{{ $enroll->student($enroll->user_id) }}</td> --}}
                              <td>{{$enroll->student()}}</td>
                              <td>{{ $enroll->stage->name }}</td>
                              <td>{{ $enroll->created_at->format('d M Y') }}</td>
                              <td>{{ $enroll->updated_at->format('d M Y') }}</td>
                              <td>
                                   <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$enroll->id}}" data-post_id="{{$enroll->post_id}}" data-attcode="{{$enroll->attcode}}"><i class="fas fa-pen"></i></a>
                              </td>
                         </tr>
                    @endforeach

               =In Enroll.php
                    public function student(){

                         // Method 3
                         // $students = Student::where("user_id",$this->user_id)->get();
                         // // dd($students);

                         // foreach($students as $student){
                         //     // dd($student);
                         //     // dd($student["regnumber"]);
                         //     return $student["regnumber"];
                         // }

                         // Method 4
                         $students = Student::where("user_id",$this->user_id)->get()->pluck("regnumber");
                         // dd($students);

                         foreach($students as $student){
                              // dd($student); // "WDF1001"
                              return $student;
                         }
                    }

          =Method 5, 6
                =Enroll.php
                    public function student(){
                         
                         // Method 5
                                // join(se table,sec table prikey,compare,primary table fkkey)
                         // $students = Student::join("users","users.id","=","students.user_id")->where("user_id",$this->user_id)->get();
                         // // dd($students);

                         // foreach($students as $student){
                         //     // dd($student);
                         //     return $student["regnumber"];
                         // }

                         // Method 6
                         $students = Student::join("users","users.id","=","students.user_id")->where("user_id",$this->user_id)->get()->pluck("regnumber");
                         // dd($students);

                         foreach($students as $student){
                              // dd($student); // "WDF1001"
                              return $student;
                         }

                    }
               
               * join(sec table, primary table fkkey,compare,sec table prikey)


               *result - when freely joning two tables without conditions 
                   Illuminate\Database\Eloquent\Collection {#1452  // app\Models\Enroll.php:76
                    #items: array:4 [
                    0 => App\Models\Student {#1450 }
                    1 => App\Models\Student {#1455 }
                    2 => App\Models\Student {#1456 }
                    3 => App\Models\Student {#1454 }
                    ]
                    #escapeWhenCastingToString: false
                    }
               
               *result ($student) ## - destructure array (two tables columns come out)
               	
                    App\Models\Student {#1449  // app\Models\Enroll.php:79
                    #connection: "mysql"
                    #table: "students"
                    #primaryKey: "id"
                    ....
                    #original: array:15 [
                         "id" => 1
                         "regnumber" => "WDF1001"
                         "firstname" => "Admin"
                         "lastname" => "Boot"
                         "slug" => "adminboot"
                         "remark" => "Lorem Ipsum is simply dummy text of the printing and typesetting industry."
                         "status_id" => 1
                         "user_id" => 1
                         "created_at" => "2023-12-12 07:27:33"
                         "updated_at" => "2023-12-12 07:53:59"
                         "name" => "admin"
                         "email" => "admin@gmail.com"
                         "email_verified_at" => null
                         "password" => "$2y$12$xffXPm7kidQvS4CgU8LThuAgkEb5otckKTMpVJtuDmrwFsmVApqh6"
                         "remember_token" => "4o4q9tTG60LrsI9HAxMWtCQVOH2xXgkjrOs1M9yeStdGtPmWQqOvovkApVRB"
                    ]
                    }

          =Method 7, 8
               public function student(){
                    
                    // Method 7
                    // $students = Student::join("users","users.id","=","students.user_id")->where("user_id",$this->user_id)->get(["users.*","students.*"]);
                    // // dd($students);

                    // foreach($students as $student){
                    //     // dd($student);
                    //     return $student["regnumber"];
                    // }


                    // Method 8
                    $students = Student::join("users","users.id","=","students.user_id")->where("user_id",$this->user_id)->get(["users.name","students.regnumber"])->first();
                    //dd($students);
                    //dd($students["regnumber"]);
                    return $students["regnumber"];

               }

               *result ($students)
               App\Models\Student {#1444  // app\Models\Enroll.php:106
                    #connection: "mysql"
                    #table: "students"
                    #primaryKey: "id"
                    ....
                    #original: array:2 [
                    "name" => "admin"
                    "regnumber" => "WDF1001"
                    ]        
                    ....
               }

               -Method 7 = all columns from two table come out
               -Method 8 = only selected columns come out

          =Method 9
               $students = Student::join("users","users.id","=","students.user_id")->where("user_id",$this->user_id)->get(["users.name","students.regnumber"])->pluck("regnumber")->first();
               // dd($students); // "WDF1001"
               return $students;

               *pluck should't be written at the end
               $students = Student::join("users","users.id","=","students.user_id")->where("user_id",$this->user_id)->get(["users.name","students.regnumber"])->first()->pluck("regnumber");
               *result ($students)
                    Illuminate\Support\Collection {#1445  // app\Models\Enroll.php:112
                    #items: array:4 [
                    0 => "WDF1001"
                    1 => "WDF1002"
                    2 => "WDF1003"
                    3 => "WDF1004"
                    ]
                    #escapeWhenCastingToString: false
                    } 
          
          =Method 10, 11

               // Method 10
               // $students = DB::table("students")
               //             ->join("users","users.id","=","students.user_id")
               //             ->where("user_id",$this->user_id)
               //             ->get(["users.name","students.regnumber"])
               //             ->pluck("regnumber")->first();
          
               // // dd($students);
               // return $students;

               // Method 11
               $students = DB::table("students")
                              ->select("users.id","users.name","students.regnumber")
                              ->join("users","users.id","=","students.user_id")
                              ->where("user_id",$this->user_id)
                              ->get()
                              ->pluck("regnumber")->first();
          
               // dd($students);
               return $students;

               *result ->get()
                    Illuminate\Support\Collection {#1446  // app\Models\Enroll.php:135
                    #items: array:1 [
                    0 => {#1444 
                         +"id": 1
                         +"name": "admin"
                         +"regnumber": "WDF1001"
                    }
                    ]
                    #escapeWhenCastingToString: false
                    }

           =My     
     
          =MyMethod
               $student = Student::join("users","students.user_id","=","users.id")->where("users.id",$this->user_id)->get(["students.regnumber"])->first();
               // dd($student->regnumber);
               return $student->regnumber;

               
     =>Link with Student 
          =In Enroll.php
               public function studenturl(){
                    return Student::where("user_id",$this->user_id)->get(["students.id"])->first();
               }

          =In enrolls > index.blade.php

               @foreach($enrolls as $idx=>$enroll)
                         <tr>
                              <td>{{++$idx}}</td>
                              {{-- <td>{{ $enroll->student($enroll->user_id) }}</td> --}}
                              <td><a href="{{route('students.show',$enroll->studenturl())}}">{{$enroll->student()}}</a></td>
               ....

          =>Back to Enroll From Student
               =In students > show.blade.php
                    <a href="javascript:void(0);" id="btn-back" class="btn btn-secondary btn-sm rounded-0">Back</a>
                    ....
                    @section("scripts")
                         <script type="text/javascript">
                              // Start Back Btn
                                   const getbtnback = document.getElementById("btn-back");
                                   getbtnback.addEventListener("click",function(){
                                        // window.history.back();
                                        window.history.go(-1);
                                   });
                              // End Back Btn
                         </script>
                    @endsection

                    *go() can reach both front and back

     =>Student Tab Template
          =students > show.blade.php
               <h6>Additional Info</h6>
               <div class="card border-0 rounded-0 shadow mb-4">
                    <ul class="nav">
                         <li class="nav-item">
                              <button type="button" id="autoclick" class="tablinks" onclick="gettab(event,'follower')">Follower</button>
                         </li>
                         <li class="nav-item">
                              <button type="button" class="tablinks" onclick="gettab(event,'following')">Following</button>
                         </li>
                         <li class="nav-item">
                              <button type="button" class="tablinks" onclick="gettab(event,'liked')">Liked</button>
                         </li>
                         <li class="nav-item">
                              <button type="button" class="tablinks" onclick="gettab(event,'remark')">Remark</button>
                         </li>
                    </ul>

                    <div class="tab-content">

                         <div id="follower" class="tab-pane">
                              <h3>This is Home Information</h3>
                              <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
                         </div>

                         <div id="following" class="tab-pane">
                              <h3>This is Profile Information</h3>
                              <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
                         </div>

                         <div id="liked" class="tab-pane">
                              <h3>This is Contact Information</h3>
                              <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
                         </div>

                         <div id="remark" class="tab-pane">
                              <p>{{ $student->remark }}</p>
                         </div>

                    </div>
               </div>

               ....
               @section("css")
                    <style type="text/css">
                         /* Start Tag Box */
                         .nav{
                         display: flex;

                         padding: 0;
                         margin: 0;
                         }
                         .nav .nav-item{
                         list-style-type: none;
                         }
                         .nav .tablinks{
                         border: none;
                         font-size: 16px;
                         padding: 15px 20px;
                         cursor: pointer;

                         transition: background-color 0.3s ease-in;
                         }
                         .nav .tablinks:hover{
                         background-color: #f3f3f3;
                         }

                         .nav .tablinks.active{
                              color: blue;
                         }

                         .tab-pane{

                         padding: 5px 15px;

                         display: none;
                         }
                         /* End Tag Box */
                    </style>
               @endsection

               @section("scripts")
                    // Start Tag Box
                    var gettablinks = document.getElementsByClassName('tablinks');  //HTMLCollection
                    var gettabpanes = document.getElementsByClassName('tab-pane');
                    // console.log(gettabpanes);

                    var tabpanes = Array.from(gettabpanes);

                    function gettab(evn,linkid){

                    tabpanes.forEach(function(tabpane){
                         tabpane.style.display = 'none';
                    });

                    for(var x = 0 ; x < gettablinks.length ; x++){
                         gettablinks[x].className = gettablinks[x].className.replace(' active','');
                    }


                    document.getElementById(linkid).style.display = 'block';


                    // evn.target.className += ' active';
                    // evn.target.className = evn.target.className.replace('tablinks','tablinks active');
                    // evn.target.classList.add('active');

                    // evn.target = evn.currentTarget
                    evn.currentTarget.className += ' active';

                    }

                    document.getElementById('autoclick').click();
                    // End Tag Box
               @endsection

     =>Student Enrolls
          =StudentController.php

               public function show(string $id)
               {
                    $student = Student::findOrFail($id);

                    // $enrolls = Enroll::where("user_id",$student["user_id"])->get();
                    $enrolls = $student->enrolls();
                    // dd($enrolls);
                    return view("students.show",["student"=>$student,"enrolls"=>$enrolls]);
               
               }

          =Student.php
               public function enrolls(){
                    return Enroll::where("user_id",$this->user_id)->get();
               }

          *Controller - Model 
          -enrolls information of the student

          =In students > show.blade.php

                <h6>Enrolls</h6>
               <div class="card border-0 rounded-0 shadow mb-4">
                    <div class="card-body d-flex flex-wrap gap-3">
                         
                         @foreach($enrolls as $enroll)
                         <div class="border shadow p-3 mb-3 enrollboxes">
                              <a href="javascript:void(0);">{{ $enroll->post["title"] }}</a>
                              <div class="text-muted">{{ $enroll->stage["name"] }}</div>
                              <div class="text-muted">{{ date("d M Y",strtotime($enroll->created_at)) }} | {{ date("h:i:s A",strtotime($enroll->created_at)) }}</div>
                              <div class="text-muted">{{ $enroll->updated_at->format("d M Y | h:i:s A") }} </div>
                              {{-- <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::limit($enroll->remark,20) }}</div> --}}
                              {{-- <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::limit($enroll->remark,20,"---") }}</div> --}}
                              {{-- <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::of($enroll->remark)->limit(20) }}</div> --}}
                              {{-- <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::of($enroll->remark)->words(4) }}</div> --}}
                              {{-- <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::of($enroll->remark)->words(4,"----") }}</div> --}}
                              {{-- <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::words($enroll->remark,4) }}</div> --}}
                              <div class="mt-1" title="{{ $enroll->remark }}">{{ Str::words($enroll->remark,4,"----") }}</div>
                         </div>
                         @endforeach
                    </div>
               </div>

          - Enroll Class
               post() inside Enroll.php
                    not in Student
               
               1.There is not post_id in students.
               2.Get information from enrolls. "enrolls" has post_id.
     
     =>Own Search
          =>By Controller
               =In countries > index.blade.php
                    <div class="col-md-12">
                         <form action="" method="">
                              <div class="row justify-content-end">
                                   <div class="col-md-2 col-sm-6 mb-2">
                                        <div class="input-group">
                                             <input type="text" name="filtername" id="filtername" class="form-control form-control-sm rounded-0" placeholder="Search...."/>
                                             <button type="submit" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                                        </div>
                                   </div>
                              </div>
                         </form>
                    </div>

               =In CountriesController.php
                    public function index()
                    {
                         // http://127.0.0.1:8000/countries?filtername=mm
                         // dd(request("filtername")); // mm

                         $countries = Country::where(function($query){
                                   if($getname = request("filtername")){
                                        $query->where("name","LIKE","%".$getname."%");
                                   }
                         })->get();
                         // dd($countries);
                         return view("countries.index",compact("countries"));
                    }

                    -request() - get the request form value
                    -Countries -> where($query) = countries tables represent $query
                         Change query based on condition. (filtername exists or not) 

                    *result ($countries)
                    Illuminate\Database\Eloquent\Collection {#1412  // app\Http\Controllers\CountriesController.php:22
                    #items: array:1 [
                    0 => App\Models\Country {#1411 
                         #connection: "mysql"
                         #table: "countries"
                         #primaryKey: "id"
                         #original: array:6 [
                         "id" => 1
                         "name" => "Myanmar"
                         "slug" => "myanmar"
                         "user_id" => 1
                         "created_at" => "2023-12-23 19:14:06"
                         "updated_at" => "2023-12-23 19:14:06"
                         ]
                    ....
                    }
                    ]
                    #escapeWhenCastingToString: false
                    }

                    http://127.0.0.1:8000/countries?filtername=th
                    *result 
                         Thailand
                    
                    http://127.0.0.1:8000/countries?filtername=
                    *result 
                         Myanmar
                         Thailand

               =>Get Old Search Value
                    =In cities > index.blade.php

                         <div class="col-md-12">
                              <form action="" method="">
                                   <div class="row justify-content-end">
                                        <div class="col-md-2 col-sm-6 mb-2">
                                             <div class="input-group">
                                                  <input type="text" name="filtername" id="filtername" class="form-control form-control-sm rounded-0" placeholder="Search...." value="{{ request('filtername') }}"/>
                                                  <button type="submit" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                                             </div>
                                        </div>
                                   </div>
                              </form>
                         </div>

                    =In CitiesController.php
                         public function index()
                         {
                              $cities = City::where(function($query){
                                   if($getname = request("filtername")){
                                        $query->where("name","LIKE","%".$getname."%");
                                   }
                              })->get();
                              // dd($cities);
                              return view("cities.index",compact("cities"));
                         }
          
          =>With Javascript
               =In cities > index.blade.php
                    <div class="input-group">
                         <input type="text" name="filtername" id="filtername" class="form-control form-control-sm rounded-0" placeholder="Search...." value="{{ request('filtername') }}"/>
                         <button type="button" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                    </div>
                    ....


                     // Start Filter
                    const getfilterbtn = document.getElementById("btn-search");
                    getfilterbtn.addEventListener("click",function(e){
                         // console.log("hay");

                         const getfiltername = document.getElementById("filtername").value;
                         const getcururl = window.location.href;
                         
                         // console.log(getfiltername); // search value
                         // console.log(getcururl); // http://127.0.0.1:8000/cities?filtername=yan
                         // console.log(getcururl.split("?")); // ['http://127.0.0.1:8000/cities', 'filtername=yan']
                         // console.log(getcururl.split("?")[0]); // 
                         window.location.href = getcururl.split("?")[0] + "?filtername="+getfiltername;

                         e.preventDefault();
                    });
                    // End Filter

                    *without using submit button, js send value to the current file with the url. 

     =>Lite Looping Method , pluck(value,key)
          =In RolesController.php
               public function create()
               {    
                    //$statuses = Status::all(); // get all statuses
                    $statuses = Status::whereIn("id",[3,4])->get()->pluck('name',"id");
                    //  dd($statuses);
                    return view("roles.create",compact("statuses"));
               }

          =In roles > create.blade.php
               <div class="col-md-6">
                    <label for="name">Status <span class="text-danger">*</span></label>
                    <select type="text" name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                         <!-- <option value="3">On</option>
                         <option value="4">On</option> -->

                         {{-- @foreach($statuses as $status)
                              <option value="{{$status->id}}">{{ $status->name }}</option>
                         @endforeach
                         --}}

                         {{-- 
                         @foreach($statuses as $id=>$name)
                              <option value="{{ $id}}">{{ $name }}</option>
                         @endforeach
                         --}}

                         @foreach($statuses as $idx=>$status)
                              <option value="{{ $idx}}">{{ $status }}</option>
                         @endforeach
                    </select>
               </div>

          *result ($statuses)
               Illuminate\Support\Collection {#1422  // app\Http\Controllers\RolesController.php:25
               #items: array:2 [
               "On" => 3
               "Off" => 4
               ]
               #escapeWhenCastingToString: false
          
          *@foreach($statuses as $id=>$name) is the recommended method.
               
     =>Own Filter DropDown
          =In roles > index.blade.php
               <div class="col-md-12">
                    <form action="" method="">
                         <div class="row justify-content-end">
                              <div class="col-md-2 col-sm-6 mb-2">
                                   <div class="form-group">
                                        <select name="filterstatus_id" id="filterstatus_id" class="form-control form-control-sm rounded-0">
                                             <option value="" selected>Choose Status....</option>     
                                             @foreach($filterstatuses as $id=>$name)
                                                  <option value="{{$id}}">{{ $name }}</option>
                                             @endforeach
                                        </select>
                                   </div>
                              </div>
                         </div>
                    </form>
               </div>
               ....
               <script type="text/javascript">
                    // Start Filter
                    const getfilterstatus = document.getElementById("filterstatus_id");
                    getfilterstatus.addEventListener("click",function(e){
                         // const getstatusid = this.value;
                         // const getstatusid = this.options[this.selectedIndex].value;
                         const getstatusid = this.value || this.options[this.selectedIndex].value;
                         // console.log(getstatusid);

                         let getcururl = window.location.href;
                         // console.log(getcururl); // http://127.0.0.1:8000/cities?filtername=yan
                         // console.log(getcururl.split("?")); // ['http://127.0.0.1:8000/cities', 'filtername=yan']
                         // console.log(getcururl.split("?")[0]); // 
                         
                         window.location.href = getcururl.split("?")[0] + "?filterstatus_id="+getstatusid;

                         e.preventDefault();
                    });
                    // End Filter
          
          =In RolesController.php
               public function index()
               {
                    $roles = Role::where(function($query){
                         if($statusid = request("filterstatus_id")){
                              $query->where("status_id",$statusid);
                         }
                    })->get();
                    $filterstatuses = Status::whereIn("id",[3,4])->get()->pluck('name',"id");
                    return view("roles.index",compact("roles"),compact("filterstatuses"));
               }
               -it doesn't need "LIKE" Sytax because status_id can be checked directly. 

          -may think 'js' is not useful for the above search feature.
               but it is useful for the filter faeture. Because it has no button to submit form. Only js can submit form. 

          =>Backend Option
               =In roles. index.blade.php

                    <select name="filterstatus_id" id="filterstatus_id" class="form-control form-control-sm rounded-0">
                         <!-- <option value="" selected>Choose Status....</option>      -->
                         @foreach($filterstatuses as $id=>$name)
                              <option value="{{$id}}">{{ $name }}</option>
                         @endforeach
                    </select>

               =In RolesController.php
                    public function index()
                    {
                         $roles = Role::where(function($query){
                              if($statusid = request("filterstatus_id")){
                                   $query->where("status_id",$statusid);
                              }
                         })->get();
                         $filterstatuses = Status::whereIn("id",[3,4])->get()->pluck('name',"id")->prepend("Choose Status","");
                         // dd($filterstatuses);
                         return view("roles.index",compact("roles"),compact("filterstatuses"));
                    }

                    *prepend() after pluck. Increase the array at the first. 

                    *result ($filterstatuses);
                    Illuminate\Support\Collection {#1424  // app\Http\Controllers\RolesController.php:23
                    #items: array:3 [
                    "" => "Choose Status"
                    3 => "On"
                    4 => "Off"
                    ]
                    #escapeWhenCastingToString: false
                    }

          => Get Old Filter Value
               =In roles > index.blade.php

                    <select name="filterstatus_id" id="filterstatus_id" class="form-control form-control-sm rounded-0">
                         <!-- <option value="" selected>Choose Status....</option>      -->
                         @foreach($filterstatuses as $id=>$name)
                              <option value="{{$id}}" {{ $id == request('filterstatus_id') ? 'selected' : '' }}>{{ $name }}</option>
                         @endforeach
                    </select>

     =>Using Laravel Folder Downloaded From Github

          Github
               repository > Code > 'Download Zip'

          *.env and other ignores file do not include


          composer update
          (vpn may be needed to on)

          =Create .env file
               -copy existing .env file's content    
          
          php artisan serve

     =>Validation Error
          =In genders > index.blade.php
                <form action="{{route('genders.store')}}" method="POST">
                    {{ csrf_field() }}
                    <div class="row align-items-end">
                         <div class="col-md-6 form-group">
                              <label for="name">Name <span class="text-danger">*</span></label>
                              @error("name")
                                   <span class="text-danger">{{ $message }}<span>
                              @enderror
                              <input type="text" name="name" id="name" class="form-control form-control-sm rounded-0 @error('name') is-invalid @enderror" placeholder="Enter Gender Name" value="{{ old('name') }}"/>
                              {{-- @error("name")
                                   <span class="invalid-feedback">{{ $message }}<span>
                              @enderror
                              --}}

                         </div>
          
          "invalid-feedback" = text color red for message
          "is-invalid" = field red border
          Error Message = The name field is required.

          *can be displayed as you like.
          -error messagees are generally displayed under input field. 
          
          =In roles > create.blade.php  
               <div class="col-md-6 mb-3">
                    <label for="image">Image</label>
                    <input type="file" name="image" id="image" class="form-control form-control-sm rounded-0" value="{{ old('image')}}"/>
                    @error("image")
                         <span class="text-danger">{{ $message }}<span>
                    @enderror
               </div>

               <div class="col-md-6 mb-3">
                    <label for="name">Name <span class="text-danger">*</span></label>
                    <input type="text" name="name" id="name" class="form-control form-control-sm rounded-0" placeholder="Enter Role Name" value="{{ old('name') }}"/>
                    @error("name")
                         <span class="text-danger">{{ $message }}<span>
                    @enderror
               </div>

               <div class="col-md-6">
                    <label for="name">Status <span class="text-danger">*</span></label>
                    <select type="text" name="status_id" id="status_id" class="form-control form-control-sm rounded-0">
                         <option selected disabled>Choose Status</option>

                         {{-- @foreach($statuses as $status)
                              <option value="{{$status->id}}">{{ $status->name }}</option>
                         @endforeach
                         --}}

                         {{-- 
                         @foreach($statuses as $id=>$name)
                              <option value="{{ $id}}">{{ $name }}</option>
                         @endforeach
                         --}}

                         @foreach($statuses as $idx=>$status)
                              <option value="{{ $idx}}">{{ $status }}</option>
                         @endforeach
                    </select>
                    @error("status_id")
                         <span class="text-danger">{{ $message }}<span>
                    @enderror
               </div>

          -Error get from validation rules that are specified at the controller of the respective method.
          -Error only occur when the input field didn't match the valudation rules.

          *select box is already chosen one option. It will not get error.
          

          Error Handling Pages
          1.Create page
          2.Edit page

     =>Laravel Pagination

          =In TagsController.php
               public function index()
               {
                    $tags = Tag::orderBy("id","asc")->paginate(5);
                    $statuses = Status::whereIn("id",[3,4])->get();
                    return view("tags.index",compact("tags","statuses"));
               }
               -paginate(limitnumber)
               -retrive only limited number of rows
               *paginate() should be placed at the last because it is the data retriever.

          =In tags > index.blade.php
               </table>
               {{ $tags->links('pagination::bootstrap-4') }}
               ----------------------------------------------
               </table>
                    {{ $tags->links() }}

               *Problem 
                    Angle Arrow Design do not align.  
               -problem is bootstrap version
                    project bootstrap = version 5
               -laravel no longer support bootstrap
                    laravel support bootstrap = version 4
               -laravel support tailwind

          http://127.0.0.1:8000/tags?page=1
          http://127.0.0.1:8000/tags?page=2

          paginate() & links() are closely connected.
          links() generate pagination links.
          paginate() retrieve relevant row from table.

          =>Number Order
               - No. always 1 to 5 at all pages.
               *Number should be ordered at each pages.

               =In tags > index.blade.php
                     @foreach($tags as $idx=>$tag)
                         <tr>
                              {{-- <td>{{++$idx}}</td> --}}
                              <td>{{$idx+ $tags->firstItem()}}</td>

                    
               {{$tags->firstItem()}}
               {{-- $idx+ $tags->lastItem() --}}
               <table id="mytable" class="table table-sm table-hover border">

               firstItem() - 1, 6, 11
               *id is added by the current page first item. 

     =>Search, Filter & Pagination
          =In CountriesController.php
               public function index()
               {
                    // http://127.0.0.1:8000/countries?filtername=mm
                    // dd(request("filtername")); // mm

                    $countries = Country::where(function($query){
                              if($getname = request("filtername")){
                                   $query->where("name","LIKE","%".$getname."%");
                              }
                    })->paginate(5);
                    // dd($countries);
                    return view("countries.index",compact("countries"));
               }
     
          =In RolesController.php
               public function index()
               {
                    $roles = Role::where(function($query){
                         if($statusid = request("filterstatus_id")){
                              $query->where("status_id",$statusid);
                         }
                    })->paginate(5);
                    $filterstatuses = Status::whereIn("id",[3,4])->get()->pluck('name',"id")->prepend("Choose Status","");
                    // dd($filterstatuses);
                    return view("roles.index",compact("roles"),compact("filterstatuses"));
               }

     =>Record Download Link

          =Migration
               php artisan make:model Edulink -m

               =In create_edilinks_table.php
                    $table->date("classdate");
                    $table->unsignedBigInteger("post_id");
                    $table->string("url");
                    $table->unsignedBigInteger("user_id");

               php artisan migrate:status
               php artisan migrate

          =php artisan make:controller EdulinksController    

          =>Create New Record
               =In EdulinksController.php
                    public function index()
                    {
                         $data["edulinks"] = Edulink::orderBy("updated_at","desc")->get();
                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck('title',"id");
                         return view("edulinks.index",$data);
                    }

               =In Edulinks index.blade.php
                    <form action="{{route('edulinks.store')}}" method="POST">
                         {{ csrf_field() }}

                         <div class="row align-items-end">
                              <div class="col-md-3">
                                   <label for="classdate">Class Date <span class="text-danger">*</span></label>
                                   @error("classdate")
                                        <span class="text-danger">{{ $message }}<span>
                                   @enderror
                                   <input type="date" name="classdate" id="classdate" class="form-control form-control-sm rounded-0" value="{{ old('classdate') }}"/>
                              </div>

                              <div class="col-md-3">
                                   <label for="post_id">Class <span class="text-danger">*</span></label>
                                   @error("post_id")
                                        <span class="text-danger">{{ $message }}<span>
                                   @enderror
                                   <select name="post_id" id="post_id" class="form-control form-control-sm rounded-0">
                                        <option selected disabled>Choose class</option>
                                        @foreach($posts as $id=>$title)
                                             <option value="{{$id}}">{{$title}}</option> 
                                        @endforeach     
                                   </select>
                              </div>

                              <div class="col-md-3">
                                   <label for="url">Url <span class="text-danger">*</span></label>
                                   @error("url")
                                        <span class="text-danger">{{ $message }}<span>
                                   @enderror
                                   <input type="text" name="url" id="url" class="form-control form-control-sm rounded-0" placeholder="Enter url" value="{{ old('url') }}"/>
                              </div>

                              <div class="col-md-3">
                                   <button type="reset" class="btn btn-secondary btn-sm rounded-0">Cancel</button>
                                   <button type="submit" class="btn btn-primary btn-sm rounded-0 ms-3">Submit</button>
                              </div>
                         </div>
                    </form>

               =>Store Record
                    =In EdulinksController.php
                         public function store(Request $request)
                         {
                              $this->validate($request,[
                                   "classdate"=>"required|date",
                                   "post_id"=>'required',
                                   "url"=>"required"
                              ]);

                              $user = Auth::user();
                              $user_id = $user->id;

                              $edulink = new Edulink();
                              $edulink->classdate = $request["classdate"];
                              $edulink->post_id = $request["post_id"];
                              $edulink->url = $request["url"];
                              $edulink->user_id = $user_id;

                              $edulink->save();
                              return redirect()->route("edulinks.index");
                         }
          
          =>List All Records
               =In edulinks > index.blade.php
                    <table id="mytable" class="table table-sm table-hover border">
          
                         <thead>
                              <th>ID</th>
                              <th>Class</th>
                              <th>URL</th>
                              <th>By</th>
                              <th>Class Date</th>
                              <th>Created At</th>
                              <th>Updated At</th>
                              <th>Action</th>
                         </thead>
                         <tbody>
                              @foreach($edulinks as $idx=>$edulink)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td><a href="{{route('posts.show',$edulink->post_id)}}">{{$edulink->post['title']}}</a></td>
                                   <td><a href="#">{{ Str::limit($edulink->url,30) }}</a></td>
                                   <td>{{ $edulink["user"]["name"] }}</td>
                                   <td>{{ date("d M Y",strtotime($edulink->classdate)) }}</td>
                                   <td>{{ $edulink->created_at->format('d M Y h:i A') }}</td>
                                   <td>{{ $edulink->updated_at->format('d M Y') }}</td>
                                   <td>
                                        <a href="{{$edulink->url}}" class="text-primary" target="_blank" download="abc"><i class="fas fa-download"></i></a>
                                        <a href="javascript:void(0);" class="text-info ms-2 editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$edulink->id}}" data-post_id="{{$edulink->post_id}}" data-attcode="{{$edulink->attcode}}"><i class="fas fa-pen"></i></a>
                                   </td>
                              </tr>
                              @endforeach
                         </tbody>
               
                    </table>

               <a href="https://dlt.com/user/user1.jpg" class="text-primary" target="_blank" download="abc"><i class="fas fa-download"></i></a>

               *Real world server link 
               downlod ="abc"
               file is download with the specified file name from download attribute.

               =>Copy URL
                    =In Edulinks > index.blade.php
                         <td><a href="javascript:void(0);" class="link-btns" data-url="{{ $edulink->url}}" title="Copy Link">{{ Str::limit($edulink->url,30) }}</a></td>
                         ....

                         // Start link btn
                         $(".link-btns").click(function(){
                              var geturl = $(this).data("url");
                              // console.log(geturl);
                              navigator.clipboard.writeText(geturl);
                         });
                         // End link btn

          =>Own Search & Filter
               
               =In edulinks > index.blade.php
                    <form action="" method="">
                         <div class="row justify-content-end">
                              <div class="col-md-2 col-sm-6 mb-2">
                                   <div class="form-group">
                                        <select name="filter" id="filter" class="form-control form-control-sm rounded-0">
                                             @foreach($filterposts as $id=>$name)
                                                  <option value="{{$id}}" {{ $id == request('filter') ? 'selected' : '' }}>{{ $name }}</option>
                                             @endforeach
                                        </select>
                                   </div>
                              </div>

                              <div class="col-md-2 col-sm-6 mb-2">
                                   <div class="input-group">
                                        <input type="text" name="search" id="search" class="form-control form-control-sm rounded-0" placeholder="Search...." value="{{ request('filtername') }}"/>
                                        <button type="submit" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                                   </div>
                              </div>

                              
                         </div>
                    </form>

                    ....
                    // Start Filter
                    document.getElementById("filter").addEventListener("click",function(){
                         let getfilterid = this.value || this.options[this.selectedIndex].value;
                         // console.log(getid);
                         window.location.href = window.location.href.split("?")[0]+"?filter="+getfilterid;
                    });
                    // End Filter

               =In EdulinksController.php
                    public function index()
                    {
                         // $data["edulinks"] = Edulink::orderBy("updated_at","desc")->paginate(5);
                         $data["edulinks"] = Edulink::where(function($query){
                              if($getfilter = request("filter")){
                                   $query->where("post_id",$getfilter);
                              } 
                              if($getsearch = request("search")){
                                   // $query->where("classdate","LIKE","%".$getsearch."%");
                                   $query->where("classdate","LIKE","%${getsearch}%");
                              }
                         })->orderBy("classdate","desc")->paginate(5);
                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck('title',"id");
                         $data["filterposts"] = Post::whereIn("attshow",[3])->orderBy("title","asc")->pluck('title',"id")->prepend("Choose Class","");
                         return view("edulinks.index",$data);
                    }
                    *search results based on filtered classes.
                    =If the filter option is choosen, search classes are within the filtered class. 

          =>Local Scopes in Laravel Eloquent
               = Method 1
                    =In Edulink.php
                         // Define Local Scope
                         // public function scope[name]($query){
                         //      return $query->(method);
                         // }

                         public function scopezaclassdate($query){
                              return $query->orderBy("classdate","desc");
                         }

                         *prefix "scope" must be included.

                    =In EdulinksController.php
                    public function index()
                    {
                         // $data["edulinks"] = Edulink::orderBy("updated_at","desc")->paginate(5);
                         $data["edulinks"] = Edulink::where(function($query){
                              if($getfilter = request("filter")){
                                   $query->where("post_id",$getfilter);
                              } 
                              if($getsearch = request("search")){
                                   // $query->where("classdate","LIKE","%".$getsearch."%");
                                   $query->where("classdate","LIKE","%${getsearch}%");
                              }
                         })->zaclassdate()->paginate(5);
                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck('title',"id");
                         $data["filterposts"] = Post::whereIn("attshow",[3])->orderBy("title","asc")->pluck('title',"id")->prepend("Choose Class","");
                         return view("edulinks.index",$data);
                    }

                    *can easily apply specific constraints to your database queries,

               =Method 2
                    =In Edulink.php
                         public function scopefilter($query){
                              if($getfilter = request("filter")){
                                   $query->where("post_id",$getfilter);
                              } 
                              if($getsearch = request("search")){
                                   // $query->where("classdate","LIKE","%".$getsearch."%");
                                   $query->where("classdate","LIKE","%${getsearch}%");
                              }
                              return $query;
                         }

                    =In EdulinksController.php
                         public function index()
                         {
                              // $data["edulinks"] = Edulink::orderBy("updated_at","desc")->paginate(5);
                              $data["edulinks"] = Edulink::filter()->zaclassdate()->paginate(5);
                              $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck('title',"id");
                              $data["filterposts"] = Post::whereIn("attshow",[3])->orderBy("title","asc")->pluck('title',"id")->prepend("Choose Class","");
                              return view("edulinks.index",$data);
                         }  

          =Inspecting Database Query In background
                    =In EdulinksController.php

                         // \DB::enableQueryLog();
                         // $data["edulinks"] = Edulink::all();
                         // dd( \DB::getQueryLog());

                         \DB::enableQueryLog();
                         $data["edulinks"] = Edulink::filter()->zaclassdate()->paginate(5);
                         dd( \DB::getQueryLog());
                         
                         
                         // \DB::enableQueryLog();
                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck('title',"id");
                         // dd( \DB::getQueryLog());
                         $data["filterposts"] = Post::whereIn("attshow",[3])->orderBy("title","asc")->pluck('title',"id")->prepend("Choose Class","");
                         return view("edulinks.index",$data);

                    *result ($data["edulinks"])                        
                    array:1 [ // app\Http\Controllers\EdulinksController.php:37
                    0 => array:3 [
                    "query" => "select * from `edulinks`"
                    "bindings" => []
                    "time" => 0.56
                    ]
                    ]
                                             
                    *result ($data["posts"])
                    array:1 [ // app\Http\Controllers\EdulinksController.php:45
                    0 => array:3 [
                    "query" => "select `title`, `id` from `posts` where `attshow` = ? order by `title` asc"
                    "bindings" => array:1 []
                    "time" => 1.48
                    ]
                    ]

                    *result ($data["edulinks"] with pagination)
                    array:2 [ // app\Http\Controllers\EdulinksController.php:41
                    0 => array:3 [
                    "query" => "select count(*) as aggregate from `edulinks`"
                    "bindings" => []
                    "time" => 0.74
                    ]
                    1 => array:3 [
                    "query" => "select * from `edulinks` order by `classdate` desc limit 5 offset 0"
                    "bindings" => []
                    "time" => 0.66
                    ]
                    ]

          =Multi Column Search
               =In Edulink.php
                    public function scopefilter($query){
                         if($getfilter = request("filter")){
                              $query->where("post_id",$getfilter);
                         } 
                         if($getsearch = request("search")){
                              // $query->where("classdate","LIKE","%".$getsearch."%");
                              
                              // search by class date / created at / updated at
                              // $query->where("classdate","LIKE","%${getsearch}%")
                              //     ->orWhere("created_at","LIKE","%${getsearch}%")
                              //     ->orWhere("updated_at","LIKE","%${getsearch}%");
                              
                              // search by class date / created at / updated at
                              // $query->where("classdate","LIKE","%${getsearch}%");
                              // $query->orWhere("created_at","LIKE","%${getsearch}%");
                              // $query->orWhere("updated_at","LIKE","%${getsearch}%");
                         
                              $query->where("classdate","LIKE","%${getsearch}%")
                                   ->orWhere("created_at","LIKE","%${getsearch}%")
                                   ->orWhere("updated_at","LIKE","%${getsearch}%")
                                   ->orWhereHas("post",function($query) use($getsearch){
                                        $query->where("title","LIKE","%${getsearch}%");
                                   });
                         }
                         return $query;
                    }

               *class at the date or match with created_at, updated_at column will be received.
               *orWhereHas() allow to retrieve records from a table by checking specific condition in a related table.
                    -orWhereHas(relationship,callback(){})
                    -can search with post name in the search box insted of searching by post_id
               *error (Undefined variable $getsearch)  
                    -to apply $getsearch inside callback function 
                    -use($getseaerch) is needed

          =Get Old Search & Filter Values
               =In edulink > index.blade.php

                    <div class="col-md-2 col-sm-6 mb-2">
                         <div class="form-group">
                              <select name="filter" id="filter" class="form-control form-control-sm rounded-0">
                                   @foreach($filterposts as $id=>$name)
                                        <option value="{{$id}}" {{ $id == request('filter') ? 'selected' : '' }}>{{ $name }}</option>
                                   @endforeach
                              </select>
                         </div>
                    </div>

                    <div class="col-md-2 col-sm-6 mb-2">
                         <div class="input-group">
                              <input type="text" name="search" id="search" class="form-control form-control-sm rounded-0" placeholder="Search...." value="{{ request('search') }}"/>
                              <button type="submit" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                         </div>
                    </div>


          =>Solving Pagination Problem
               =filter post
                    filtered results pagination
               =Switch Page 2
                    all the values passed with url cleared and paginate all results                
               
          =>Precise Search & Filter
               
               -above search and filter has some issue
                    =filter post
                    =search class date
                    *other post contains class date is inclusive.

               -to only search within filtered posts not in another post

               =In Edulinks.php
                    public function scopefilteronly($query){
                         if($getfilter = request("filter")){
                              $query->where("post_id",$getfilter);
                         } 
                         
                         return $query;
                    }

                    public function scopesearchonly($query){
                         
                         if($getsearch = request("search")){
                         
                              $query->where("classdate","LIKE","%${getsearch}%")
                                   ->orWhere("created_at","LIKE","%${getsearch}%")
                                   ->orWhere("updated_at","LIKE","%${getsearch}%")
                                   ->orWhereHas("post",function($query) use($getsearch){
                                        $query->where("title","LIKE","%${getsearch}%");
                                   });
                         }
                         return $query;
                    }

               =In EdulinksController.php
                    // \DB::enableQueryLog();
                    // $data["edulinks"] = Edulink::filter()->zaclassdate()->paginate(5);
                    // dd( \DB::getQueryLog());

                    // \DB::enableQueryLog();
                    $data["edulinks"] = Edulink::filteronly()->searchonly()->zaclassdate()->paginate(5);
                    // dd( \DB::getQueryLog());

               *result ($data["edulinks"])
                    =before split 
                         array:2 [ // app\Http\Controllers\EdulinksController.php:41
                         0 => array:3 [
                         "query" => "select count(*) as aggregate from `edulinks` where (`post_id` = ? and `classdate` LIKE ? or `created_at` LIKE ? or `updated_at` LIKE ? or exists (select * from `posts` where `edulinks`.`post_id` = `posts`.`id` and `title` LIKE ?)) "
                         "bindings" => array:5 []
                         "time" => 0.7
                         ]
                         1 => array:3 [
                         "query" => "select * from `edulinks` where (`post_id` = ? and `classdate` LIKE ? or `created_at` LIKE ? or `updated_at` LIKE ? or exists (select * from `posts` where `edulinks`.`post_id` = `posts`.`id` and `title` LIKE ?)) order by `classdate` desc limit 5 offset 0 "
                         "bindings" => array:5 []
                         "time" => 0.59
                         ]
                         ]

                    =after split
                         array:2 [ // app\Http\Controllers\EdulinksController.php:45
                         0 => array:3 [
                         "query" => "select count(*) as aggregate from `edulinks` where `post_id` = ? and (`classdate` LIKE ? or `created_at` LIKE ? or `updated_at` LIKE ? or exists (select * from `posts` where `edulinks`.`post_id` = `posts`.`id` and `title` LIKE ?)) "
                         "bindings" => array:5 []
                         "time" => 0.65
                         ]
                         1 => array:3 [
                         "query" => "select * from `edulinks` where `post_id` = ? and (`classdate` LIKE ? or `created_at` LIKE ? or `updated_at` LIKE ? or exists (select * from `posts` where `edulinks`.`post_id` = `posts`.`id` and `title` LIKE ?)) order by `classdate` desc limit 5 offset 0 "
                         "bindings" => array:5 []
                         "time" => 0.51
                         ]
                         ]

          =>Reset Search & Filter 
               =In edulinks > index.blade.php
                    <div class="input-group">
                         <input type="text" name="search" id="search" class="form-control form-control-sm rounded-0" placeholder="Search...." value="{{ request('search') }}"/>
                         <button type="button" id="btn-clear" class="btn btn-secondary btn-sm"><i class="fas fa-sync"></i></button>
                         <button type="submit" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                    </div>
                    ....

                    // Start Clear btn
                    document.getElementById("btn-clear").addEventListener("click",function(){
                         const getfilter = document.getElementById("filter");
                         const getsearch = document.getElementById("search");

                         getfilter.selectedIndex = 0;
                         getsearch.value = "";

                         window.location.href = window.location.href.split("?")[0];
                    });
                    // End Clear btn

          =>Edit Record
               =In edulinks > index.blade.php
                    <!-- start edit modal -->
                    <div id="editmodal" class="modal fade">
                         <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content rounded-0">
                                   <div class="modal-header">
                                        <h6 class="modal-title">Edit Form</h6>
                                        <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                   </div>

                                   <div class="modal-body">
                                        <form id="formaction" action="" method="POST">
                                             {{ csrf_field() }}
                                             {{ method_field('PUT') }}
                                             <div class="row align-items-end">

                                                  <div class="col-md-6">
                                                       <label for="editclassdate">Class Date<span class="text-danger">*</span></label>
                                                       <input type="date" name="editclassdate" id="editclassdate" class="form-control form-control-sm rounded-0" />
                                                  </div>
                                                  
                                                  <div class="col-md-6 form-group">
                                                       <label for="editpost_id">Class <span class="text-danger">*</span></label>
                                                       <select name="editpost_id" id="editpost_id" class="form-control form-control-sm rounded-0">
                                                            @foreach($posts as $id=>$title)
                                                                 <option value="{{$id}}">{{$title}}</option> 
                                                            @endforeach     
                                                       </select>
                                                  </div>

                                                  <div class="col-md-12">
                                                       <label for="editurl">URL<span class="text-danger">*</span></label>
                                                       <input type="text" name="editurl" id="editurl" class="form-control form-control-sm rounded-0" />
                                                  </div>

                                                  <div class="col-md-12 d-flex justify-content-end mt-2">
                                                       <button type="submit" class="btn btn-primary btn-sm rounded-0">Update</button>
                                                  </div>
                                             </div>
                                        </form>
                                   </div>

                                   <div class="modal-footer">

                                   </div>
                              </div>
                         </div>
                    </div>
                    <!-- end edit modal -->
                    ....
                    // Start Edit Form
                    $(document).on("click",".editform",function(e){
                         
                         $("#editclassdate").val($(this).data("classdate"));
                         $("#editpost_id").val($(this).data("post"));
                         $("#editurl").val($(this).data("url"));
                         
                         const getid = $(this).attr("data-id");
                         $("#formaction").attr("action",`/edulinks/${getid}`);

                         e.preventDefault();
                    });
                    // End Edit Form
               
               =In EdulinksController.php
                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "editclassdate"=>"required|date",
                              "editpost_id"=>'required',
                              "editurl"=>"required"
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $edulink = Edulink::findOrFail($id);
                         $edulink->classdate = $request["editclassdate"];
                         $edulink->post_id = Str::slug($request["editpost_id"]);
                         $edulink->url = $request["editurl"];
                         $edulink->user_id = $user_id;

                         $edulink->save();
                         return redirect(route("edulinks.index"));
                    }

                    *error message at crreate fields (The classdate field is required. The post id field is required. The url field is required.)
                    $this->validate($request,[
                         "classdate"=>"required|date",
                         "post_id"=>'required',
                         "url"=>"required"
                    ]);

                    *validate() verify form field name. Not database column name.

          =>Success Message With Alert Box
               =>Create Message
                    =In EdulinksController.php
                         public function store(Request $request)
                         {
                              ....
                              $edulink->save();
                              //    return redirect()->route("edulinks.index");
                              // return redirect()->route("edulinks.index")->with("success","New Link Created");

                              session()->flash("success","New Link Created!!");
                              return redirect()->route("edulinks.index");
                         }

                    =In edulinks > index.blade.php
                          @if($getsuccess = session("success"))
                              <div class="alert alert-success rounded-0">{{ $getsuccess }}</div>
                         @endif
                         <form action="{{route('edulinks.store')}}" method="POST">

               =Update Message
                    =In EdulinksController.php
                         public function update(Request $request, string $id)
                         {
                              ....

                              $edulink->save();
                              // return redirect(route("edulinks.index"));
                              // return redirect()->route("edulinks.index")->with("success","Update Successfully");
                              
                              session()->flash("success","Update Successfully!!");
                              return redirect()->route("edulinks.index");
                         }

                    =In edulinks > index.blade.php

                         {{-- @if($getsuccess = session("success"))
                              <div class="alert alert-success rounded-0">{{ $getsuccess }}</div>
                              @endif
                         --}}

                         @if(session("success"))
                              <div class="alert alert-success rounded-0">{{ session("success") }}</div>
                         @endif

               -After the new record is created, system display create message to user.
               -After the record is updated, system display create message to user.
                    *message is displyed at the same location, because they use same variable name.
                    *Upon reload, the message disappear.

               *allows to attach data to the redirect response, making it accessible on the subsequent request.

               *The with() method is used to flash data to the session, meaning it stores the data temporarily for the next request and then removes it.
                    with(key,value)
                    -delete the data immediately after accessing.

          =>Delete Record
               =With jQuery
                    =In edulinks > index.blade.php
                    <td>
                         <a href="{{$edulink->url}}" class="text-primary" target="_blank" download="abc"><i class="fas fa-download"></i></a>
                         <a href="javascript:void(0);" class="text-info ms-2 editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$edulink->id}}" data-classdate="{{$edulink->classdate}}" data-post="{{$edulink->post_id}}" data-url="{{$edulink->url}}"  ><i class="fas fa-pen"></i></a>
                         <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx + $edulinks->firstItem()}}"><i class="fas fa-trash-alt"></i></a>
                    </td>
                    <form id="formdelete-{{ $idx + $edulinks->firstItem() }}" class="" action="{{route('edulinks.destroy',$edulink->id)}}" method="POST">
                         @csrf
                         @method("DELETE")
                    </form>
               
                    ....
                    // Start Delete Item
                    $(".delete-btns").click(function(){
                         // console.log('hay');
               
                         var getidx = $(this).data("idx");
                         // console.log(getidx);

                         if(confirm(`Are you sure !!! you want to Delete ${getidx} ?`)){
                              $('#formdelete-'+getidx).submit();
                              return true;
                         }else{
                              false;
                         }
                    });
                    // End Delete Item

                    =In EdulinksController.php
                         public function destroy(string $id)
                         {
                              $edulink = Edulink::findOrFail($id);
                              $edulink->delete();

                              session()->flash("success","Delete Successfully!!");
                              return redirect()->back();
                         }

                    *links() and firstItem() work together with the paginate() from controller.
                         *error 
                              if controller retrieve row with all() and get()
                    
                    *The edulinks is already paginated.
                         -it can't simply use the $idx. If use, it do not match the number between target number and actual number.

               =With JS
                    var deletebtns = document.querySelectorAll(".delete-btns");
                    deletebtns.forEach(function(deletebtn){
                         deletebtn.addEventListener("click",function(){
                              var getidx = this.getAttribute("data-idx");
                              console.log(getidx);

                              if(confirm(`Are you sure !!! you want to Delete ${getidx} ?`)){
                                   document.getElementById('formdelete-'+getidx).submit();
                                   return true;
                              }else{
                                   false;
                              }
                         });
                    });

          =>Auto show/hide Reset Button
               =In edulinks > index.blade.php
                    ....
                    // Start Autoshow Btn Clear
                    const autoshowbtn = function(){
                         let getbtnclear = document.getElementById("btn-clear");
                         let geturlquery = window.location.search; // ?filter=16&search=09
                         // console.log(geturlquery); 
                         let pattern = /[?&]search=/;

                         if(pattern.test(geturlquery)){
                              getbtnclear.style.display ="block";
                         }else{
                              getbtnclear.style.display ="none";
                         }
                    }
                    autoshowbtn();
                    // End Autoshow Btn Clear
     
     =>My Contact
          =Migration
               php artisan make:model Relative -m

               =create_relatives_table.php
                    $table->string("name")->unique();
                    $table->string("slug");
                    $table->unsignedBigInteger("status_id");
                    $table->unsignedBigInteger("user_id");

               php artisan make:model Contact -m 

               =create_contacts_table.php
                    $table->string("firstname");
                    $table->string("lastname")->nullable();
                    $table->string("birthday")->nullable();
                    $table->unsignedBigInteger("relative_id")->nullable();
                    $table->foreignId("user_id")->constrained(
                         table:"users",
                         indexName:"contacts_users_id"
                    )->onUpdate("cascade")->onDelete("cascade");

               *foreign key link 
                    -not to add if the main entity is not exist


                    onUpdate("cascade")
                    onDelete("cascade")
                    -ensures the correctness of the reference even when the primary table values are modified or deleted

               php artisan migrate:status
               php artisan migrate


          "Relatives"
               Mother
               Father
               Parent
               Brother
               Sister
               Son
               Daughter
               Child
               Friend
               Spouse
               Partner
               Assistant
               Manager
               Other
               Sweet Heart

          php artisan make:controller RelativesController
          php artisan make:controller ContactsController

          =>Create & Store Contacts
               =In contacts > index.blade.php
                    <!-- start create modal -->
                    <div id="createmodal" class="modal fade">
                         <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content rounded-0">
                                   <div class="modal-header">
                                        <h6 class="modal-title">Create Form</h6>
                                        <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                   </div>

                                   <div class="modal-body">
                                        <form id="{{route('contacts.store')}}" action="" method="POST">
                                             {{ csrf_field() }}
                                             <div class="row align-items-end">
                                                  <div class="col-md-6">
                                                       <label for="firstname">First Name <span class="text-danger">*</span></label>
                                                       <input type="text" name="firstname" id="firstname" class="form-control form-control-sm rounded-0" placeholder="Enter First Name" value="{{ old('firstname') }}"/>
                                                  </div>

                                                  <div class="col-md-6">
                                                       <label for="lastname">Last Name</label>
                                                       <input type="text" name="lastname" id="lastname" class="form-control form-control-sm rounded-0" placeholder="Enter Last Name" value="{{ old('lastname') }}"/>
                                                  </div>

                                                  <div class="col-md-6">
                                                       <label for="birthday">Birthday</label>
                                                       <input type="date" name="birthday" id="birthday" class="form-control form-control-sm rounded-0" value="{{ old('birthday') }}"/>
                                                  </div>
                                                  
                                                  <div class="col-md-6 form-group">
                                                       <label for="relative_id">Relative</label>
                                                       <select name="relative_id" id="relative_id" class="form-control form-control-sm rounded-0">
                                                            @foreach($relatives as $id=>$name)
                                                                 <option value="{{$id}}">{{ $name }}</option>
                                                            @endforeach     
                                                       </select>
                                                  </div>
                                                  
                         
                                                  <div class="col d-flex justify-content-end mt-2">
                                                       <button type="submit" class="btn btn-primary btn-sm rounded-0">Submit</button>
                                                  </div>
                                             </div>
                                        </form>
                                   </div>

                                   <div class="modal-footer">

                                   </div>
                              </div>
                         </div>
                    </div>
                    <!-- end create modal -->

               =In ContactsController.php
                    public function index()
                    {
                         $data["contacts"] = Contact::all();
                         $relatives = Relative::orderBy("id","asc")->pluck("name","id")->prepend("Choose relative","");
                         return view("contacts.index",compact("relatives"),$data);
                    }
               
               *pluck() automatically sort a-z
               -to sort as database row, use orderBy() by sorting id in asc 


               =In ContactsController.php
                    public function store(Request $request)
                    {
                         $this->validate($request,[
                              "firstname" => "required|min:3|max:50",
                              "lastname"=>"max:50",
                              "birthday"=>"nullable",
                              "relative_id"=>"nullable"
                         ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $contact = new Contact();
                         $contact->firstname = $request["firstname"];
                         $contact->lastname = $request["lastname"];
                         $contact->birthday = $request["birthday"];
                         $contact->relative_id = $request["relative_id"];
                         $contact->user_id = $user_id;

                         $contact->save();
                         
                         session()->flash("success","New Contact Created");
                         return redirect(route("contacts.index"));
                    }

          =>List All Contacts
               =In contacts > index.blade.php
                    <table id="mytable" class="table table-sm table-hover border">
               
                         <thead>
                              <th>ID</th>
                              <th>First Name</th>
                              <th>Last Name</th>
                              <th>Birthday</th>
                              <th>Relative</th>
                              <th>By</th>
                              <th>Created At</th>
                              <th>Updated At</th>
                              <th>Action</th>
                         </thead>
               
                         <tbody>
                              @foreach($contacts as $idx=>$contact)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td>{{$contact->firstname}}</td>
                                   <td>{{$contact->lastname}}</td>
                                   <td>{{ date("d M Y",strtotime($contact->birthday)) }}</td>
                                   <td>{{ $contact["relative"]["name"] }}</td>
                                   <td>{{ $contact["user"]["name"] }}</td>
                                   <td>{{ $contact->created_at->format('d M Y') }}</td>
                                   <td>{{ $contact->updated_at->format('d M Y') }}</td>
                                   <td>
                                        <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$contact->id}}" data-name="{{$contact->name}}" data-status="{{$contact->status_id}}"><i class="fas fa-pen"></i></a>
                                        <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                                   </td>
                                   <form id="formdelete-{{ $idx }}" class="" action="{{route('contacts.destroy',$contact->id)}}" method="POST">
                                        @csrf
                                        @method("DELETE")
                                   </form>
                              </tr>
                              @endforeach
                         </tbody>  
                    </table>
               
          
               "contacts"
               id   firstname      lastname       birthday       relative_id
               2    Zaw            Myo            NULL           NULL

               *error
               Trying to access array offset on value of type null

               {{ dd(date("d M Y",strtotime(""))); }} 
               "01 Jan 1970"
               
               =In contacts > index.blade.php

                    <td>{{ $contact->birthday ? date("d M Y",strtotime($contact->birthday)) : "" }}</td>
                    <td>{{ $contact->relative_id ? $contact["relative"]["name"] : "" }}</td>
                    
                    *empty shown at the table column.
          
          =>Delete Contact
               public function destroy(string $id)
               {
                    $contact = Contact::findOrFail($id);
                    $contact->delete();
                    session()->flash("info","Delete Successfully");
                    return redirect()->back();
               }
               
          =>toastr Notification

               https://github.com/CodeSeven/toastr


               CDNs > 
               Minified
                    //cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js
                    //cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css
               
               =>Usage

                    Other Options > 

               =In adminheader.blade.php
                    <!-- toastr css1 js1 -->
                    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />

               =In adminfooter.blade.php
                    <!-- toastr css1 js1 -->
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js" type="text/javascript"></script>
                    
                    <script> 
                         
                         @if(session()->has("success"))
                              toastr.success('{{ session()->get("success") }}', 'Successful')
                         @endif

                         @if(session()->has("info"))
                              toastr.info('{{ session()->get("info") }}', 'Information')
                         @endif

                         // =>Display all validation errors 
                         @if($errors)
                              @foreach($errors->all() as $error)
                                   toastr.error('{{$error}}', 'Warning!')
                              @endforeach
                         @endif
                    </script>

                    *all pages can access success message from session and then display to user.
                    =contact create 
                    =contact delete 
                    =contact validation errors

                    =posts validation errors

                    *blade codes inside javascript <script></script> 

                    =>Seperate blade code and js code
                         =>Session method
                              =>Adding toastr Options
                                   =In adminfooter.blade.php
                                        <!-- toastr css1 js1 -->
                                        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js" type="text/javascript"></script>
                                        <script>
                                             toastr.options = {
                                                  "progressBar":true,
                                                  "closeButton":true
                                             };
                                        </script> 

                                             @if(Session::has("success"))
                                                  <script>toastr.success('{{ session()->get("success") }}', 'Successful')</script>
                                             @endif

                                             @if(session()->has("info"))
                                                  <script>toastr.info('{{ session()->get("info") }}', 'Information')</script>
                                             @endif

                                             @if($errors)
                                                  @foreach($errors->all() as $error)
                                                       <script>toastr.error('{{$error}}', 'Warning!',{timeOut:1000})</script>
                                                  @endforeach
                                             @endif

          =>Edit Contact 
               =In index.blade.php
                    <td>
                         <a href="javascript:void(0);" class="text-info editform" data-bs-toggle="modal" data-bs-target="#editmodal" data-id="{{$contact->id}}" data-firstname="{{$contact->firstname}}" data-lastname="{{$contact->lastname}}" data-birthday="{{$contact->birthday}}" data-relative="{{$contact->relative_id}}"><i class="fas fa-pen"></i></a>
                         <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                    </td>
                    ....
                    <!-- start edit modal -->
                    <div id="editmodal" class="modal fade">
                         <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content rounded-0">
                                   <div class="modal-header">
                                        <h6 class="modal-title">Edit Form</h6>
                                        <button type="" class="btn-close" data-bs-dismiss="modal"></button>
                                   </div>

                                   <div class="modal-body">
                                        <form id="formaction" action="" method="POST">
                                             {{ csrf_field() }}
                                             {{ method_field('PUT') }}
                                             <div class="row align-items-end">
                                                  <div class="col-md-6 form-group">
                                                       <label for="editfirstname">First Name <span class="text-danger">*</span></label>
                                                       <input type="text" name="firstname" id="editfirstname" class="form-control form-control-sm rounded-0"/>
                                                  </div>

                                                  <div class="col-md-6 form-group">
                                                       <label for="editlastname">Last Name <span class="text-danger">*</span></label>
                                                       <input type="text" name="lastname" id="editlastname" class="form-control form-control-sm rounded-0"/>
                                                  </div>

                                                  <div class="col-md-6 form-group">
                                                       <label for="editbirthday">Birthday<span class="text-danger">*</span></label>
                                                       <input type="date" name="birthday" id="editbirthday" class="form-control form-control-sm rounded-0"/>
                                                  </div>
                                             
                                                  
                                                  <div class="col-md-6 form-group">
                                                       <label for="editrelative_id">Relative</label>
                                                       <select name="relative_id" id="editrelative_id" class="form-control form-control-sm rounded-0">
                                                            @foreach($relatives as $id=>$name)
                                                                 <option value="{{$id}}">{{$name}}</option>
                                                            @endforeach       
                                                       </select>
                                                  </div>
                                                  
                         
                                                  <div class="col d-flex justify-content-end mt-2">
                                                       <button type="submit" class="btn btn-primary btn-sm rounded-0">Update</button>
                                                  </div>
                                             </div>
                                        </form>
                                   </div>

                                   <div class="modal-footer">

                                   </div>
                              </div>
                         </div>
                    </div>
                    <!-- end edit modal -->
                    ....
                    // Start Edit Form
                    $(document).on("click",".editform",function(e){
                         
                         $("#editfirstname").val($(this).attr("data-firstname"));
                         $("#editlastname").val($(this).attr("data-lastname"));
                         $("#editbirthday").val($(this).attr("data-birthday"));
                         $("#editrelative_id").val($(this).attr("data-relative"));
                         
                         const getid = $(this).data("id");
                         $("#formaction").attr("action",`/contacts/${getid}`);

                         e.preventDefault();
                    });
                    // End Edit Form

               =In ContactsController.php
                    public function update(Request $request, string $id)
                    {
                         $this->validate($request,[
                              "firstname" => "required|min:3|max:50",
                              "lastname"=>"max:50",
                              "birthday"=>"nullable",
                              "relative_id"=>"nullable"
                         ]);

                         $user = Auth::user();
                         $user_id = $user["id"];

                         $contact = Contact::findOrFail($id);
                         $contact->firstname = $request["firstname"];
                         $contact->lastname = $request["lastname"];
                         $contact->birthday = $request["birthday"];
                         $contact->relative_id = $request["relative_id"];
                         $contact->user_id = $user_id;
                         $contact->save();

                         session()->flash("success","Update Successfully");
                         return redirect(route("contacts.index"));
                    }

          =>Setting Default to Laravel Pagination
               =In app > Providers > AppServiceProvider.php
                    use Illuminate\Pagination\Paginator;

                    public function boot(): void
                    {
                         View::composer('*',function($view){
                              $view->with("userdata",Auth::user());
                         });

                         Paginator::useBootstrapFive();
                    }

               =In contacts > index.blade.php
                    {{ $contacts->links() }}
                    {{-- $contacts->links("pagination::bootstrap-4") --}}
                    {{-- $contacts->links("pagination::bootstrap-5") --}}
               
          =>Contact Search & Filter + Pagination
               =In contacts > index.blade.php
                    <div class="col-md-12">
                         <form action="" method="">
                              <div class="row justify-content-end">
                                   <div class="col-md-2 col-sm-6 mb-2">
                                        <div class="form-group">
                                             <select name="filter" id="filter" class="form-control form-control-sm rounded-0">
                                                  @foreach($relatives as $id=>$name)
                                                       <option value="{{$id}}" {{ $id == request('filter') ? 'selected' : '' }}>{{ $name }}</option>
                                                  @endforeach
                                                  
                                             </select>
                                        </div>
                                   </div>

                                   <div class="col-md-2 col-sm-6 mb-2">
                                        <div class="input-group">
                                             <input type="text" name="search" id="search" class="form-control form-control-sm rounded-0" placeholder="Search...." value="{{ request('search') }}"/>
                                             <button type="button" id="btn-clear" class="btn btn-secondary btn-sm"><i class="fas fa-sync"></i></button>
                                             <button type="submit" id="btn-search" class="btn btn-secondary btn-sm"><i class="fas fa-search"></i></button>
                                        </div>
                                   </div>

                                   
                              </div>
                         </form>
                    </div>
                    ....
                    </table>
                    {{ $contacts->links() }}
                    {{-- $contacts->appends(request()->only("filter","search"))->links() --}}

                    ....
                    <script type="text/javascript">
                         // Start Filter
                         document.getElementById("filter").addEventListener("click",function(){
                              let getfilterid = this.value || this.options[this.selectedIndex].value;
                              // console.log(getid);
                              window.location.href = window.location.href.split("?")[0]+"?filter="+getfilterid;
                         });
                         // End Filter

                         // Start Clear btn
                         document.getElementById("btn-clear").addEventListener("click",function(){
                              const getfilter = document.getElementById("filter");
                              const getsearch = document.getElementById("search");

                              getfilter.selectedIndex = 0;
                              getsearch.value = "";

                              window.location.href = window.location.href.split("?")[0];
                         });
                         // End Clear btn

                         // Start Autoshow Btn Clear
                         const autoshowbtn = function(){
                              let getbtnclear = document.getElementById("btn-clear");
                              let geturlquery = window.location.search; // ?filter=16&search=09
                              // console.log(geturlquery); 
                              let pattern = /[?&]search=/;

                              if(pattern.test(geturlquery)){
                                   getbtnclear.style.display ="block";
                              }else{
                                   getbtnclear.style.display ="none";
                              }
                         }
                         autoshowbtn();
                         // End Autoshow Btn Clear

                    **have to appends() both 'filter' and 'search' query
                         if not, pagination will not correctly work. It will start from the orignal url not including filtered and searched query.

               =In Contact.php     
                    public function scopefilteronly($query){
                         if($getfilter = request("filter")){
                              $query->where("relative_id",$getfilter);
                         } 
                         
                         return $query;
                    }

                    public function scopesearchonly($query){
                         
                         if($getsearch = request("search")){
                              // search by firstname / lastname / birthday / relative name or WhereHas(relation,callback)
                              $query->where("firstname","LIKE","%${getsearch}%")
                                   ->orWhere("lastname","LIKE","%${getsearch}%")
                                   ->orWhere("birthday","LIKE","%${getsearch}%")
                                   ->orWhereHas("relative",function($query) use($getsearch){
                                        $query->where("name","LIKE","%${getsearch}%");
                                   });
                         }
                         return $query;
                    }

                    public function scopezafirstname($query){
                         return $query->orderBy("firstname","asc");
                    }

               =In ContactsController.php

                    public function index()
                    {
                         // $data["contacts"] = Contact::paginate(5);
                         $data["contacts"] = Contact::filteronly()->searchonly()->zafirstname()->paginate(5)->withQueryString();
                         $relatives = Relative::orderBy("id","asc")->pluck("name","id")->prepend("Choose relative","");
                         return view("contacts.index",compact("relatives"),$data);
                    }

                    *withQueryString() to include all the query string at the end of url.

     =>Breradcrumb & Auto page title

               {{-- <p>{{ \Request::root() }}<p> --}}            {{-- http://127.0.0.1:8000 --}}
               {{-- <p>{{ \Request::fullURL() }}<p> --}}          {{-- http://127.0.0.1:8000/edulinks?filter=4&search=16 --}}
               {{-- <p>{{ \Request::url() }}<p> --}}              {{-- http://127.0.0.1:8000/edulinks (not including query) --}}
               {{-- <p>{{ \Request::getRequestUri() }}<p> --}}    {{-- /edulinks?filter=4&search=16 ( include all url and query behind domain /host name ) --}}
               {{-- <p>{{ \Request::getPathInfo() }}<p> --}}      {{-- /edulinks ( include all url behind domain /host name but not including query ) --}}
               {{-- <p>{{ \Request::path() }}<p> --}}             {{-- posts/1/edit ( include all url behind domain /host name but not including query ) --}}
                                   

               {{-- <p>{{ request()->root() }}<p> --}}             {{-- http://127.0.0.1:8000 --}}
               {{-- <p>{{ request()->fullURL() }}<p> --}}          {{-- http://127.0.0.1:8000/edulinks?filter=4&search=16 --}}
               {{-- <p>{{ request()->url() }}<p> --}}              {{-- http://127.0.0.1:8000/edulinks (not including query) --}}
               {{-- <p>{{ request()->getRequestUri() }}<p> --}}    {{-- /edulinks?filter=4&search=16 ( include all url and query behind domain /host name ) --}}
               {{-- <p>{{ request()->getPathInfo() }}<p> --}}      {{-- /edulinks ( include all url behind domain /host name but not including query ) --}}
               {{-- <p>{{ request()->path() }}<p> --}}             {{-- posts/1/edit ( include all url behind domain /host name but not including query ) --}}
                                        
               {{-- /////////////////////////////////////////////////////////////////// --}}

               {{-- <p>{{ url()->full() }}<p> --}}                {{-- http://127.0.0.1:8000/edulinks?filter=4&search=16 --}}
               {{-- <p>{{ url()->current() }}<p> --}}             {{-- http://127.0.0.1:8000/edulinks (not including query) --}}
               {{-- <p>{{ url()->previous() }}<p> --}}            {{-- http://127.0.0.1:8000/edulinks?filter=4&search=16 (get full url but it is the last url request not current) --}}

          =Breadcrumb Format 
               Home / Recent / Current

          =In adminindex.blade.php
               <!-- Start Inner Content Area -->
               <div class="row">
                    {{-- <h5>@yield("caption")</h5> --}}
                    {{--<h6>{{ucfirst(Request::path()) }}</h6> --}}

                    <nav>
                         <ol class="breadcrumb">
                              <li class="breadcrumb-item"><a href="{{ \Request::root() }}"><i class="fas fa-home"></i></a></li>
                              <li class="breadcrumb-item"><a href="{{ url()->previous() }}">{{ Str::title(preg_replace("/[[:punct:]]+[[:alnum:]]+/","",str_replace(Request::root()."/","",url()->previous()))) }}</a></li>
                              <li class="breadcrumb-item active">{{ucfirst(Request::path()) }}</li>
                         </ol>
                    </nav>

                    
                    @yield("content")
               </div>
               <!-- End Inner Content Area -->
          
          *Steps of removing previous url 
          <!-- http://127.0.0.1:8000/edulinks?filter=4&search=16 -->
          {{-- str_replace(Request::root()."/","",url()->previous()) --}}
          <!-- =remove primary domain name with / -->
          
          <!-- edulinks?filter=4&search=16 -->
          {{-- preg_replace("/[[:punct:]]+[[:alnum:]]+/","",str_replace(Request::root()."/","",url()->previous())) --}}
          <!-- =remove all query string -->
          
          <!-- edulinks -->
          {{-- Str::title(preg_replace("/[[:punct:]]+[[:alnum:]]+/","",str_replace(Request::root()."/","",url()->previous()))) --}}


          *URL Circle
          http://127.0.0.1:8000/posts <-> Edulinks
          http://127.0.0.1:8000/edulinks?filter=20&search=8 <-> Posts


          *URL conflit
               http://127.0.0.1:8000/posts
               http://127.0.0.1:8000/posts/1

               <- (back to the previous posts lists)
               Home / Posts / Posts

               =Click previous Posts
               Home / Posts / Posts/1

     =>Leaves
          php artisan make:model Leave -m

          =In create_leaves_table.php
               $table->unsignedBigInteger("post_id");
               $table->date("startdate");
               $table->date("enddate");
               $table->unsignedBigInteger("tag");
               $table->string("title");
               $table->longText("content");
               $table->string("image")->nullable();
               $table->enum('stage_id',[1,2,3])->default(2)->comment("1=Approved, 2= Pending, 3=Reject");
               $table->unsignedBigInteger("authorize_id")->nullable();
               $table->unsignedBigInteger("user_id");

          php artisan migrate:status
          php artisan migrate

          php artisan make:controller LeavesController

          =>Create & Store Leave
               =In leaves > index.blade.php
                    <form action="/posts" method="POST" enctype="multipart/form-data">
                         @csrf

                         <div class="row">

                              <div class="col-md-4">

                                   <div class="row">
                                        <div class="col-md-12 mb-3">
                                             <label for="image" class="gallery"><span>Choose Images</span></label>
                                             <input type="file" name="image" id="image" class="form-control form-control-sm rounded-0" value="{{ old('image')}}" hidden/>
                                        </div>

                                        <div class="col-md-6 mb-3">
                                             <label for="startdate">Start Date <span class="text-danger">*</span></label>
                                             <input type="date" name="startdate" id="startdate" class="form-control form-control-sm rounded-0" value="{{ old('startdate') }}"/>
                                        </div>

                                        <div class="col-md-6 mb-3">
                                             <label for="enddate">End Date <span class="text-danger">*</span></label>
                                             <input type="date" name="enddate" id="enddate" class="form-control form-control-sm rounded-0" value="{{ old('enddate') }}"/>
                                        </div>
                                        
                                   </div>
                                   
                              </div>

                              <div class="col-md-8">
                                   <div class="row">
                                        
                                        <div class="col-md-12 mb-3">
                                             <label for="title">Title <span class="text-danger">*</span></label>
                                             <input type="text" name="title" id="title" class="form-control form-control-sm rounded-0" placeholder="Enter Post Title" value="{{ old('title') }}"/>
                                        </div>

                                        <div class="col-md-6 mb-3">
                                             <label for="post_id">Class <span class="text-danger">*</span></label>
                                             <select name="post_id" id="post_id" class="form-control form-control-sm rounded-0">
                                             <option selected disabled value="">Choose Class</option>     
                                                  @foreach($posts as $id=>$name)
                                                       <option value="{{$id}}">{{ $name }}</option>
                                                  @endforeach
                                             </select>
                                   
                                        </div>
     
                                        <div class="col-md-6 mb-3">
                                             <label for="tag">Tag <span class="text-danger">*</span></label>
                                             <select name="tag" id="tag" class="form-control form-control-sm rounded-0">
                                                  <option selected disabled value="">Choose authorize person</option>     
                                                  
                                                  @foreach($tags as $id=>$name)
                                                       <option value="{{$id}}">{{ $name }}</option>
                                                  @endforeach
                                             </select>
                                   
                                        </div>

                                        <div class="col-md-12 mb-3">
                                             <label for="content">Content <span class="text-danger">*</span></label>
                                             <textarea name="content" id="content" class="form-control form-control-sm rounded-0" rows="5" placeholder="Say Something....">{{ old('content') }}</textarea>
                                        </div>
                                        

                                        <div class="col-md-12 d-flex justify-content-end align-items-end">
                                                  <a href="{{route('posts.index')}}" class="btn btn-secondary btn-sm rounded-0 me-3">Cancel</a>
                                                  <button type="submit" class="btn btn-primary btn-sm rounded-0">Submit</button>
                                        </div>
                                   </div>
                              </div>

                              
                         </div>
                    </form>

               =In LeavesController.php
                    public function create()
                    {    
                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck("title","id");
                         $data["tags"] = User::orderBy("name","asc")->get()->pluck("name","id");

                         return view("leaves.create",$data);
                    }     

                    *tag person should be the person who has admin role. Future project iteration should implement this needs.

               =In LeavesController.php
                    public function store(LeaveRequest $request)
                    {
                         // $this->validate($request,[
                         //     "post_id" => "required",
                         //     "startdate" => "required",
                         //     "enddate" => "required",
                         //     "tag" => "required",
                         //     "title" => "required|max:50",
                         //     "content" => "required",
                         //     "image" => "nullable|image|mimes:jpg,jpeg,png|max:1024",
                         // ]);

                         $user = Auth::user();
                         $user_id = $user->id;

                         $leave = new Leave();
                         $leave->post_id = $request["post_id"];
                         $leave->startdate = $request["startdate"];
                         $leave->enddate = $request["enddate"];
                         $leave->tag = $request["tag"];
                         $leave->title = $request["title"];
                         $leave->content = $request["content"];
                         $leave->user_id = $user_id;

                         // Single Image Upload
                         if(file_exists($request["image"])){
                              $file = $request["image"];
                              $fname = $file->getClientOriginalName();
                              $imagenewname = uniqid($user_id).$leave['id'].$fname;
                              // $file->move(public_path("leaves/img"),$imagenewname);
                              $file->move(public_path("assets/img/leaves"),$imagenewname);
                              
                              $filepath = "assets/img/leaves/".$imagenewname;
                              $leave->image = $filepath;
                         }    
                         $leave->save();
                         
                         session()->flash("success","New Leave Created");
                         return redirect(route("leaves.index"));
                    }

          =>Validation with Request file
               php artisan make:request LeaveRequest

               =Original LeaveRequest.php
                    <?php

                    namespace App\Http\Requests;

                    use Illuminate\Foundation\Http\FormRequest;

                    class LeaveRequest extends FormRequest
                    {
                         /**
                              * Determine if the user is authorized to make this request.
                              */
                         public function authorize(): bool
                         {
                              return false;
                         }

                         /**
                              * Get the validation rules that apply to the request.
                              *
                              * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
                              */
                         public function rules(): array
                         {
                              return [
                                   //
                              ];
                         }
                    }

               =In app > Http > Requests > LeaveRequest.php
                    public function authorize(): bool
                    {
                         return true;
                    }

                    public function rules(): array
                    {
                         return [
                                   "post_id" => "required",
                                   "startdate" => "required",
                                   "enddate" => "required",
                                   "tag" => "required",
                                   "title" => "required|max:50",
                                   "content" => "required",
                                   "image" => "nullable|image|mimes:jpg,jpeg,png|max:1024",
                              ];
                    }

               *result ( authorize() - return false; )
               403 | THIS ACTION IS UNAUTHORIZED.

               *Validate Request should only be used when there are many validation rules.
                    - should not seperate validate request when validation rules a few of lines. 

               =>Default Validation Message

                    *result (create a leave without filling any fields.)
                         The content field is required.
                         The title field is required.
                         The tag field is required.
                         The enddate field is required.
                         The startdate field is required.
                         The post id field is required.

                    *First validation error is displayed at the bottom.
                    -User do not know the post id field. She know class. 

               =>Changing the name of attributes in error message
                    =In LeaveRequest.php
                         public function attributes(){
                              return [
                                   "post_id" => "class name",
                                   "startdate" => "start date",
                                   "enddate" => "end date",
                                   "tag" => "authorize person",
                              ]; 
                         }
                    *result (create a leave without filling any fields.)
                         The content field is required.
                         The title field is required.
                         The authorize person field is required.
                         The end date field is required.
                         The start date field is required.
                         The class name field is required.

                    *only change the attribute name not the whole message.
                    *Prove 
                         "post_id" => "class name is required",

                         The class name is required field is required.z

               =>Customizing Validtaion error message in Request File
                    -use in strict validation rules
                    
                    =In LeaveRequest.php
                         public function messages(){
                              return [
                                   "post_id.required" => "class name can't be empty",
                                   "startdate.required" => "start date can't be empty",
                                   "enddate.required" => "end date can't be empty",
                                   "tag.required" => "authorize person must be choose",
                              ];
                         }

                    *result (create a leave without filling any fields.)
                         The content field is required.
                         The title field is required.
                         authorize person must be choose
                         end date can't be empty
                         start date can't be empty
                         class name can't be empty

               =>Customizing Validation in controller
                    -use in loose validation rules

                    =In DaysController.php
                         public function store(Request $request)
                         {
                              $this->validate($request,[
                                   "name" => "required|max:50|unique:days",
                                   "status_id" => "required|in:3,4",
                              ],[
                                   "name.required"=>"Day Name is required"
                              ]);

                              $user = Auth::user();
                              $user_id = $user->id;

                              $day = new Day();
                              $day->name = $request["name"];
                              $day->slug = Str::slug($request["name"]);
                              $day->status_id = $request["status_id"];
                              $day->user_id = $user_id;
                              $day->save();
                              return redirect(route("days.index"));
                         }
          
          =>Edit & Update Leave
               =In leaves > edit.blade.php
                    <form action="/leaves/{{$leave->id}}" method="POST" enctype="multipart/form-data">
                         @csrf
                         @method("PUT")

                         <div class="row">

                              <div class="col-md-4">

                                   <div class="row">
                                        <div class="col-md-12 mb-3">

                                             <div class="row">
                                                  <div class="col-md-6 text-sm-center">
                                                       <img src="{{asset($leave->image)}}" width="200" alt="{{$leave->title}}"/>
                                                  </div>
                                                  <div class="col-md-6">
                                                       <label for="image" class="gallery"><span>Choose Images</span></label>
                                                       <input type="file" name="image" id="image" class="form-control form-control-sm rounded-0" value="{{ old('image',$leave->image) }}" hidden/>
                                                  </div>
                                             </div>
                                        </div>

                                        <div class="col-md-6 mb-3">
                                             <label for="startdate">Start Date <span class="text-danger">*</span></label>
                                             <input type="date" name="startdate" id="startdate" class="form-control form-control-sm rounded-0" value="{{ old('startdate',$leave->startdate) }}"/>
                                        </div>

                                        <div class="col-md-6 mb-3">
                                             <label for="enddate">End Date <span class="text-danger">*</span></label>
                                             <input type="date" name="enddate" id="enddate" class="form-control form-control-sm rounded-0" value="{{ old('enddate',$leave->enddate) }}"/>
                                        </div>
                                   </div>
                                   
                              </div>

                              <div class="col-md-8">
                                   <div class="row">
                                        
                                        <div class="col-md-12 mb-3">
                                             <label for="title">Title <span class="text-danger">*</span></label>
                                             <input type="text" name="title" id="title" class="form-control form-control-sm rounded-0" placeholder="Enter leave Title" value="{{ old('title',$leave->title) }}"/>
                                        </div>

                                        <div class="col-md-6">
                                             <label for="post_id">Class <span class="text-danger">*</span></label>
                                             <select name="post_id" id="post_id" class="form-control form-control-sm rounded-0">
                                                  @foreach($posts as $id=>$name)
                                                       <option value="{{$id}}"
                                                            @if($id === $leave["post_id"])
                                                                 selected
                                                            @endif
                                                       >{{ $name }}</option>
                                                  @endforeach
                                             </select>
                                        </div>

                                        <div class="col-md-6">
                                             <label for="tag">Tag <span class="text-danger">*</span></label>
                                             <select name="tag" id="tag" class="form-control form-control-sm rounded-0">
                                                  @foreach($tags as $id=>$name)
                                                       <option value="{{$id}}"
                                                            @if($id === $leave["tag"])
                                                                 selected
                                                            @endif
                                                       >{{ $name }}</option>
                                                  @endforeach
                                             </select>
                                        </div>


                                        <div class="col-md-12 mb-3">
                                             <label for="content">Content <span class="text-danger">*</span></label>
                                             <textarea name="content" id="content" class="form-control form-control-sm rounded-0" rows="5" placeholder="Say Something....">{{$leave->content}}</textarea>
                                        </div>                                   

                                        <div class="col-md-12 d-flex justify-content-end align-items-end">
                                             <div class="">
                                                  <a href="{{route('leaves.index')}}" class="btn btn-secondary btn-sm rounded-0 me-3">Cancel</a>
                                                  <button type="submit" class="btn btn-primary btn-sm rounded-0">Submit</button>
                                             </div>
                                        </div>
                                   </div>
                              </div>

                              
                         </div>
                    </form>

               =In LeavesController.php
                    public function edit(string $id)
                    {

                         $data["leave"] = Leave::findOrFail($id);

                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck("title","id");
                         $data["tags"] = User::orderBy("name","asc")->get()->pluck("name","id");

                         return view("leaves.edit",$data);
                    }

                    public function update(LeaveRequest $request, string $id)
                    {
                         // $this->validate($request,[
                         //     "post_id" => "required",
                         //     "startdate" => "required",
                         //     "enddate" => "required",
                         //     "tag" => "required",
                         //     "title" => "required|max:50",
                         //     "content" => "required",
                         //     "image" => "nullable|image|mimes:jpg,jpeg,png|max:1024",
                         // ]);

                         $user = Auth::user();
                         $user_id = $user["id"];

                         $leave = Leave::findOrFail($id);
                         $leave->post_id = $request["post_id"];
                         $leave->startdate = $request["startdate"];
                         $leave->enddate = $request["enddate"];
                         $leave->tag = $request["tag"];
                         $leave->title = $request["title"];
                         $leave->content = $request["content"];


                         // Remove Old Image
                         if($request->hasFile("image")){
                              $path = $leave->image;

                              if(File::exists($path)){
                                   File::delete($path);
                              }
                         }

                         // Single Image Update
                         if($request->hasFile("image")){
                              $file = $request->file("image");
                              $fname = $file->getClientOriginalName();
                              $imagenewname = uniqid($user_id).$leave['id'].$fname;
                              $file->move(public_path("assets/img/leaves"),$imagenewname);
                              
                              $filepath = "assets/img/leaves/".$imagenewname;
                              $leave->image = $filepath;
                         }    

                         $leave->save();
                         session()->flash("success","Update Successfully");

                         return redirect(route("leaves.index"));
                    }

          =>Two Request Files
               =Create 2 Request Files for create & edit

               -validation rules are not the exactly same
                    1. form field attributes changes (firstname,editfirstname) 
                    2. rules are differents according to the situation (create column unique do not need id but edit column need id)
               
               *There are too many files making messy project. 

          =>Incorporate validation ruels in one request file

               =In LeaveRequest.php
                    public function authorize(): bool
                    {

                         // dd($this->method()); 
                         return true;
                    }

                    public function rules(): array
                    {
                         // return [
                         //     "post_id" => "required",
                         //     "startdate" => "required",
                         //     "enddate" => "required",
                         //     "tag" => "required",
                         //     "title" => "required|max:50",
                         //     "content" => "required",
                         //     "image" => "nullable|image|mimes:jpg,jpeg,png|max:1024",
                         // ];
                         if($this->method() == "POST"){
                              return [
                                   "post_id" => "required",
                                   "startdate" => "required",
                                   "enddate" => "required",
                                   "tag" => "required",
                                   "title" => "required|max:50",
                                   "content" => "required",
                                   "image" => "nullable|image|mimes:jpg,jpeg,png|max:1024",
                              ];
                         }else{
                              return [
                                   "post_id" => "required",
                                   "startdate" => "required",
                                   "enddate" => "required",
                                   "tag" => "required",
                                   "title" => "required|max:50",
                                   "content" => "required",
                                   "image" => "nullable|image|mimes:jpg,jpeg,png|max:1024",
                              ];
                         }
                         
                    }

               
               *result (create and edit leave)                    
                    "POST" // app\Http\Requests\LeaveRequest.php:14  
                    "PUT" // app\Http\Requests\LeaveRequest.php:15

          =>List all leaves
               =In LeavesController.php
                    public function index()
                    {
                         $leaves = Leave::all();
                         return view("leaves.index",compact("leaves"));
                    }

               =In leaves > index.blade.php
                    <table id="mytable" class="table table-sm table-hover border">
     
                         <thead>
                              <th>No</th>
                              <th>Student Id</th>
                              <th>Class</th>
                              <th>Start Date</th>
                              <th>End Date</th>
                              <th>Tag</th>
                              <th>Stage</th>
                              <th>By</th>
                              <th>Created At</th>
                              <th>Updated At</th>
                              <th>Action</th>
                         </thead>
               
                         <tbody>
                              @foreach($leaves as $idx=>$leave)
                              <tr>
                                   <td>{{++$idx}}</td>
                                   <td><a href="{{ route('students.show',$leave->studenturl()) }}">{{ $leave->student($leave->user_id) }}</a></td>
                                   <td><a href="{{ route('posts.show',$leave->post_id) }}"> {{ $leave->post["title"] }}</a></td>
                                   <td>{{ $leave->startdate }}</td>
                                   <td>{{ $leave->enddate }}</td>
                                   <td>{{ $leave->tagperson["name"] }}</td>
                                   <td>{{ $leave->stage["name"] }}</td>
                                   <td>{{ $leave->user["name"] }}</td>
                                   <td>{{ $leave->created_at->format('d M Y') }}</td>
                                   <td>{{ $leave->updated_at->format('d M Y') }}</td>
                                   <td>
                                        <a href="{{ route('leaves.edit',$leave->id) }}" class="text-info"><i class="fas fa-pen"></i></a>
                                        <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                                   </td>
                                   <form id="formdelete-{{ $idx }}" class="" action="{{route('leaves.destroy',$leave->id)}}" method="POST">
                                        @csrf
                                        @method("DELETE")
                                   </form>
                              </tr>
                              @endforeach
                         </tbody>
               
                    </table>

               =In Leave.php

                    class Leave extends Model
                    {
                         use HasFactory;
                         protected $table = "leaves";
                         protected $primaryKey = "id";
                         protected $fillable = [
                              "post_id",
                              "startdate",
                              "enddate",
                              "tag",
                              "title",
                              "content",
                              "image",
                              "stage_id",
                              "authorize_id",
                              "user_id",
                         ];

                         public function user(){
                              return $this->belongsTo(User::class);
                         }

                         public function post(){
                              return $this->belongsTo(Post::class);
                         }

                         public function stage(){
                              return $this->belongsTo(Stage::class);
                         }

                         public function student($userid){
                              
                              $students = Student::where("user_id",$userid)->get()->pluck("regnumber");

                              foreach($students as $student){
                                   return $student;
                              }
                         }

                         public function studenturl(){
                              return Student::where("user_id",$this->user_id)->get(["students.id"])->first();
                         }

                         public function tagperson(){
                              return $this->belongsTo(User::class,"tag");
                         }
                    }

          =>Show leave
               =In LeavesController.php
                    public function show(string $id)
                    {
                         $leave = Leave::findOrFail($id);
                         
                         return view("leaves.show",["leave"=>$leave]);
                    }
               =In index.blade.php
                    <td>
                         <a href="{{ route('leaves.show',$leave->id) }}" class="text-primary"><i class="fas fa-book-reader"></i></a>
                         <a href="{{ route('leaves.edit',$leave->id) }}" class="text-info ms-2"><i class="fas fa-pen"></i></a>
                         <a href="#" class="text-danger ms-2 delete-btns" data-idx="{{$idx}}"><i class="fas fa-trash-alt"></i></a>
                    </td>
               =In show.blade.php
                    <div class="col-md-4">
                         <h6>Info</h6>
                         <div class="card border-0 rounded-0 shadow">
                              <div class="card-body">
                                   <div class="d-flex flex-column align-items-center mb-3">
                                        <div class="h5 mb-1">{{ $leave->title }} </div>
                                        <div class="text-muted">
                                             <span>{{ $leave["stage"]["name"] }}</span>
                                        </div>
                                        <img src="{{ asset($leave->image) }}" class="" alt="{{$leave->title}}" width="200"/>
                                   </div>

                                   <div class="mb-5">
                                       

                                        <div class="row g-0 mb-2">
                                             <div class="col-auto">
                                                  <i class="fas fa-user"></i>
                                             </div>
                                             <div class="col ps-3">
                                                  <div class="row">
                                                       <div class="col">
                                                            <div class="">Authorize</div>
                                                       </div>
                                                       <div class="col-auto">
                                                            <div class="">{{ $leave["user"]["name"] }}</div>
                                                       </div>
                                                  </div>
                                             </div>
                                        </div>

                                        <div class="row g-0 mb-2">
                                             <div class="col-auto">
                                                  <i class="fas fa-calendar-alt fa-sm"></i>
                                             </div>
                                             <div class="col ps-3">
                                                  <div class="row">
                                                       <div class="col">
                                                            <div class="">Created</div>
                                                       </div>
                                                       <div class="col-auto">
                                                            <div class="">{{date('d M Y',strtotime($leave->created_at))}} | {{date('h:i:s A',strtotime($leave->created_at))}}</div>
                                                       </div>
                                                  </div>
                                             </div>
                                        </div>

                                        <div class="row g-0 mb-2">
                                             <div class="col-auto">
                                                  <i class="fas fa-edit fa-sm"></i>
                                             </div>
                                             <div class="col ps-3">
                                                  <div class="row">
                                                       <div class="col">
                                                            <div class="">Updated</div>
                                                       </div>
                                                       <div class="col-auto">
                                                            <div class="">{{date('d M Y h:i:s A',strtotime($leave->updated_at))}}</div>
                                                       </div>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>


                                   <div class="mb-5">
                                        <p class="text-small text-muted text-uppercase mb-2">Contact Info</p>
                                        <div class="row g-0 mb-2">
                                             <div class="col-auto me-2">
                                                  <i class="fas fa-calender-alt"></i>
                                             </div>
                                             <div class="col">Sample Data</div>
                                        </div>
                                        <div class="row g-0 mb-2">
                                             <div class="col-auto me-2">
                                                  <i class="fas fa-calender-alt"></i>
                                             </div>
                                             <div class="col">Sample Data</div>
                                        </div>
                                        <div class="row g-0 mb-2">
                                             <div class="col-auto me-2">
                                                  <i class="fas fa-calender-alt"></i>
                                             </div>
                                             <div class="col">Sample Data</div>
                                        </div>
                                        <div class="row g-0 mb-2">
                                             <div class="col-auto me-2">
                                                  <i class="fas fa-calender-alt"></i>
                                             </div>
                                             <div class="col">Sample Data</div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>

                    <div class="col-md-8">
                         

                         <h6>Additional Info</h6>
                         <div class="card border-0 rounded-0 shadow mb-4">
                              <ul class="nav">
                                   <li class="nav-item">
                                        <button type="button" id="autoclick" class="tablinks" onclick="gettab(event,'content')">Content</button>
                                   </li>
                              </ul>

                              <div class="tab-content">

                                   <div id="content" class="tab-pane">
                                        <p>{!! $leave->content !!}</p>
                                   </div>

                                   

                              </div>
                         </div>
                    </div>
               
          =>Auto Select Today
               =In LeavesController.php
                    public function create()
                    {    
                         $data["posts"] = \DB::table("posts")->where("attshow",3)->orderBy("title","asc")->pluck("title","id");
                         $data["tags"] = User::orderBy("name","asc")->get()->pluck("name","id");
                         $data["gettoday"] = Carbon::today()->format("Y-m-d"); // get today // "2024-02-26"
                         // dd($data["gettoday"]);
                         return view("leaves.create",$data);
                    }

                         *result (Carbon object)
                         Illuminate\Support\Carbon @1708882200 {#1459  // app\Http\Controllers\LeavesController.php:32
                         #endOfTime: false
                         #startOfTime: false
                         #constructedObjectId: "00000000000005b30000000000000000"
                         #localMonthsOverflow: null
                         #localYearsOverflow: null
                         #localStrictModeEnabled: null
                         #localHumanDiffOptions: null
                         #localToStringFormat: null
                         #localSerializer: null
                         #localMacros: null
                         #localGenericMacros: null
                         #localFormatFunction: null
                         #localTranslator: null
                         #dumpProperties: array:3 []
                         #dumpLocale: null
                         #dumpDateProperties: null
                         date: 2024-02-26 00:00:00.0 Asia/Yangon (+06:30)
                         }

               =In leaves > create.blade.php
                    <div class="col-md-6 mb-3">
                         <label for="startdate">Start Date <span class="text-danger">*</span></label>
                         <input type="date" name="startdate" id="startdate" class="form-control form-control-sm rounded-0" value="{{ old('startdate',$gettoday) }}"/>
                    </div>

                    <div class="col-md-6 mb-3">
                         <label for="enddate">End Date <span class="text-danger">*</span></label>
                         <input type="date" name="enddate" id="enddate" class="form-control form-control-sm rounded-0" value="{{ old('enddate',$gettoday) }}"/>
                    </div>

                    *laravel send day with "Y-m-d" format. UI automatically change the date into "m/d/Y".
                    *old()
                         Even thought validation error occur, the form valules will be as user specified values, improving UX.
                         User's values will not be removed.
                    *old(user value, default value)
                         When there is no error, default value will be shown.


     =>API Switch to change on, off in UI
          =In TypesController.php
               public function typestatus(Request $request){
                    $type = Type::findOrFail($request["id"]);
                    $type->status_id = $request["status_id"];
                    $type->save();

                    return response()->json(["success"=>"Status Change Successfully"]);
               }
               *added method should write after the CRUD methods.
               *response() is for message to the client. In javascript it can be used in many ways. Alert respoonse text or other.

          php artisan route:list

          GET|HEAD        types types.index  TypesController@index  
          POST            types types.store  TypesController@store  
          GET|HEAD        types/create types.create  TypesControl  
          GET|HEAD        types/{type} types.show  TypesControlle  
          PUT|PATCH       types/{type} types.update  TypesControl  
          DELETE          types/{type} types.destroy  TypesContro  
          GET|HEAD        types/{type}/edit types.edit 

          *The added method is not inclusive.
          *Needed to register route for the method.

          =>In Web.php
               Route::resource("types",TypesController::class);
               Route::get("/typesstatus",[TypesController::class,"typestatus"]);

               php artisan route:list

               GET|HEAD        typesstatus .......................................................................... TypesController@typestatus

          =In types > index.blade.php
               <td>
                    <div class="form-checkbox form-switch">
                         <input type="checkbox" class="form-check-input change-btn" {{  $type->status_id === 3 ? 'checked' : '' }} data-id="{{ $type->id }}" />
                    </div>
               </td>
               ....
               //Start change-btn
               $(".change-btn").change(function(){
                    var getid = $(this).data("id");
                    // console.log(getid); // 1 2

                    var setstatus = $(this).prop("checked") === true ? 3 : 4;
                    // console.log(setstatus); // 3 4

                     $.ajax({
                         url:"typesstatus",
                         type:"GET",
                         dataType:"json",
                         data:{"id":getid,"status_id":setstatus},
                         success:function(response){
                              console.log(response); // {success: 'Status Change Successfully'}
                              console.log(response.success); // Status Change Successfully
                         }
                    });
               });
               // End change btn

               jQuery fullpackage is aleady connected.
               jQuery has lite file for only ajax request.

          =>Stage on/off
               =In StagesController.php
                    public function typestatus(Request $request){
                         $stage = Stage::findOrFail($request["id"]);
                         $stage->status_id = $request["status_id"];
                         $stage->save();

                         return response()->json(["success"=>"Stage Change Successfully"]);
                    }
               
               =In stages > index.blade.php
                    <td>
                         <div class="form-check form-switch">
                              <input type="checkbox" class="form-check-input change-btn" {{ $stage->status_id === 3 ? "checked" : "" }}  data-id="{{ $stage->id }}"/>
                         </div>
                    </td>
                    ....

                     //Start change-btn
                    $(".change-btn").change(function(){
                         var getid = $(this).data("id");
                         // console.log(getid); // 1 2

                         var setstatus = $(this).prop("checked") === true ? 3 : 4;
                         // console.log(setstatus); // 3 4

                         $.ajax({
                              url:"stagesstatus",
                              type:"GET",
                              dataType:"json",
                              data:{"id":getid,"status_id":setstatus},
                              success:function(response){
                                   console.log(response); // {success: 'Status Change Successfully'}
                                   console.log(response.success); // Status Change Successfully
                              }
                         });
                    });
                    // End change btn

               ****Even Though status change in form switch, status is not yet change in edit form. It will only change in next reload.

     =>Notification Feature
          https://laravel.com
          Search Box > Notifications

          https://laravel.com/docs/10.x/notifications

          #Mail Notifications 
          #Database Notifications
          #Broadcast Notifications
          #SMS Notifications
          #Slack Notifications (Developer's platform)

          =>Tag Person Notification     
               -retrieve and display the relevant notifications of the tagged person

               #Database Notifications
               =>Step1: 
                    php artisan notifications:table
                    php artisan migrate

                    *need to run for the first time
                    
                    =>Notification migrations
                         public function up(): void
                         {
                              Schema::create('notifications', function (Blueprint $table) {
                                   $table->uuid('id')->primary();
                                   $table->string('type');
                                   $table->morphs('notifiable');
                                   $table->text('data');
                                   $table->timestamp('read_at')->nullable();
                                   $table->timestamps();
                              });
                         }
                    =>phpmyadmin
                         "notifications"
                         id	type	notifiable_type	notifiable_id	data	read_at	created_at	updated_at	

               =>Setp 2
                    #Generating Notifications
                         php artisan make:notification LeaveNotify

                    app\Notifications\LeaveNotify.php

                    =>Original LeaveNotify.php
                         <?php

                         namespace App\Notifications;

                         use Illuminate\Bus\Queueable;
                         use Illuminate\Contracts\Queue\ShouldQueue;
                         use Illuminate\Notifications\Messages\MailMessage;
                         use Illuminate\Notifications\Notification;

                         class LeaveNotify extends Notification
                         {
                         use Queueable;

                         /**
                              * Create a new notification instance.
                              */
                         public function __construct()
                         {
                              //
                         }

                         /**
                              * Get the notification's delivery channels.
                              *
                              * @return array<int, string>
                              */
                         public function via(object $notifiable): array
                         {
                              return ['mail'];
                         }

                         /**
                              * Get the mail representation of the notification.
                              */
                         public function toMail(object $notifiable): MailMessage
                         {
                              return (new MailMessage)
                                             ->line('The introduction to the notification.')
                                             ->action('Notification Action', url('/'))
                                             ->line('Thank you for using our application!');
                         }

                         /**
                              * Get the array representation of the notification.
                              *
                              * @return array<string, mixed>
                              */
                         public function toArray(object $notifiable): array
                         {
                              return [
                                   //
                              ];
                         }
                         }


                         *__construct() for setting notification contents or data
                         *via() for setting deliver channel
                         *toMail() for email notification
                         *toArray for formatting notification as an array
                    
                         #Specifying Delivery Channels 
                              mail, database, broadcast, vonage, and slack channels.

                              =In LeaveNotify.php
                                   public function via(object $notifiable): array
                                   {
                                        return ['database'];
                                   }
               =>Step 3
                    #Sending Notifications
                         #Using the Notification Facade
                              Notification::send($users, new InvoicePaid($invoice));

                    *sending the specific noti to the targets users 

                    =In LeavesController.php
                         public function store(LeaveRequest $request)
                         {
                             ....
                              $leave->save();
                              
                              session()->flash("success","New Leave Created");

                              Notification::send($user,new LeaveNotify($leave->id,$leave->title));

                              return redirect(route("leaves.index"));
                         }

                         *use Illuminate\Support\Facades\Notification;
                         *use App\Notifications\LeaveNotify;

                    =>Self Notification
                         =create a leave
                         
                         "notifications"
                         id	                    type	                              notifiable_type     notifiable_id	data	                              read_at	created_at	updated_at	
                         cb1358d5-8829-4b64       App\Notifications\LeaveNotify      App\Models\User     1              {"id":4,"title":"I am very sick"}  NULL
                         -8317-026544ec9231

                         *because Auth::user is me.

                    =>All user notifications 
                         =In LeavesController.php
                         public function store(LeaveRequest $request)
                         {
                             ....
                              $leave->save();
                              
                              session()->flash("success","New Leave Created");

                              $users = User::all();
                              Notification::send($users,new LeaveNotify($leave->id,$leave->title));
                              return redirect(route("leaves.index"));
                         }

                         "notifications"
                              id	                    type	                              notifiable_type     notifiable_id	data	                              read_at	created_at	updated_at	
                              dee29ded-b963-4c26       App\Notifications\LeaveNotify      App\Models\User     1              {"id":4,"title":"I am very tired"}  NULL
                              -8b41-cb129722fe38
                              dee29ded-b963-4c26       App\Notifications\LeaveNotify      App\Models\User     20              {"id":4,"title":"I am very tired"}  NULL
                              -8b41-cb129722fe38
                              dee29ded-b963-4c26       App\Notifications\LeaveNotify      App\Models\User     30              {"id":4,"title":"I am very tired"}  NULL
                              -8b41-cb129722fe38
                              dee29ded-b963-4c26       App\Notifications\LeaveNotify      App\Models\User     40              {"id":4,"title":"I am very tired"}  NULL
                              -8b41-cb129722fe38

                              cb1358d5-8829-4b64       App\Notifications\LeaveNotify      App\Models\User     1              {"id":4,"title":"I am very sick"}  NULL
                              -8317-026544ec9231

                              *connect "users" table with the notifiable_type, notifiable_id
                              *read_at null because it is not read yet.


               =>Step 4
                    #Accessing the Notifications

                    =In adminnavbar.blade.php
                         <!-- notify -->
                         <li class="nav-item dropdowns me-3">
                         <a href="javascript:void(0);" class="nav-link dropbtn" onclick="dropbtn(event)">
                              <i class="fas fa-bell"></i>
                              {{-- <span class="badge bg-danger">{{ $userdata->unreadNotifications->count() }}</span> --}}
                              <span class="badge bg-danger">{{ auth()->user()->unreadNotifications->count() }}</span>
                         </a>

                         <div class="dropdown-contents mydropdowns">
                              <a href="javascript:void(0);" class="small text-muted text-center">Mark all as read</a>
                              
                              @foreach($userdata->unreadNotifications as $notification)
                              <a href="javascript:void(0);" class="d-flex">
                                   <div class="me-3">
                                        <i class="fas fa-bell fa-xs text-primary"></i>
                                   </div>
                                   <div class="small">
                                        <ul class="list-unstyled">
                                             <li>{{ Str::limit($notification->data["title"],20) }}</li>
                                             <li>{{ $notification->created_at->format("d M Y h:i:s A") }}</li>
                                        </ul>
                                        
                                   </div>
                              </a>
                              @endforeach
                              

                              <a href="javascript:void(0);" class="small text-muted text-center">Show All Notification</a>
                         </div>
                         </li>
                         <!-- notify -->

                    =>Test with other users
                         =login in aung aung acc

                         =View notification 1 (from admin)
                         =create a leave
                         =View notification 2 (from admin and me)

                         *result
                              I want to take a lea...
                              26 Feb 2024 06:11:41 PM

                              I am very tired.
                              26 Feb 2024 04:55:46 PM

                         *last notification on the top

                         -----------------------------------

                         =login in admin acc
                         =View notification 3 (from aung aung and me) 1 + 2

